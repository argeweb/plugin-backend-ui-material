{"version":3,"sources":["static/js/page.js","static/js/page.min.js"],"names":["json","url","data","successCallback","errorCallback","$","ajax","type","dataType","cache","async","success","a","error","b","c","d","show_message","responseJSON","json_async","ajax_post","responseText","xhr","ajaxOptions","thrownError","window","alert","message","getRandID","undefined","i","charAt","Math","floor","random","length","msg","timeout","backend","quick_show","parent_is_ready","start_filepicker","uploader","pickup","change_lang","index","eq","click","create_editor","id","ed","tinyMCE","createEditor","theme","content_css","height","plugins","toolbar","statusbar","menubar","setup","addButton","title","image","onclick","$target_editor","execCommand","toggle","on","e","convert_urls","relative_urls","remove_script_host","render","showTimeout","callback","hideHeader","showLoading","after_hide_html","stop","animate","top","addClass","html","changeView","view_name","view","current","removeClass","changeViewAndReload","currentView","first","save_form","is_saving","clearTimeout","timeout_lock_saving","setTimeout","$form","find","each","this","attr","get","val","getContent","change","submit","save_and_exit","save_with_exit","scrollDiv","iframe","removeMask","setBodyClass","class_name","pageInit","new_html","page","console","log","nav_var_top","page_header_top","scrollDiv_top","name","text","trim","hide","aside","closeUi","margin-top","hover","mouseover","mouseleave","css","scroll","affix","scrollTop","remove","checkNavItemAndShow","load","j","JSON","parse","contents","err","key","parents","indexOf","add","edit","profile","config","quick_info","ui","setUserInformation","reload","editors","prev","makeSortTable","makeListOp","bootstrapTable","fadeIn","linkClickProcess","_url","preventDefault","hasClass","lang","show","stopPropagation","swal","showCancelButton","confirmButtonColor","confirmButtonText","cancelButtonText","showLoaderOnConfirm","closeOnConfirm","location","eval","stringify","code","i_text","t","replace","pathname","stickyTableHeaders","scrollableArea","sortable","placeholder","handle","opacity","cursor","axis","update","last_page_record","$sort","field_name","field_val","is_checked","append","parent","is","g","f","showBackToListButton","filepicker","dom_is_ready","js_is_ready","pageDOD","visual_timer","onDragStart","evt","onDragEnd","removeVisualClass","onDragOver","onDrop","files","dataTransfer","insert","target","randId","addFile","setEditorValue","setTargetValue","response","item_key","item","__key__","target_id","selection","setContent","init","document","closeSearchBox","closeMessageBox","outerHTML","url_targe","then","split","enable_text","info","disable_text","filter","event","tagName","srcElement","setScope","test","shortcut","keys","handler","catchEvent","scope","onbeforeunload","unbind","backToList","close_msg_nav","short_key","toggleClass","errors","new_form_action","h","response_info","response_method","set_avatar","href"],"mappings":"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","file":"page.min.js","sourcesContent":["function json(url,data,successCallback,errorCallback)       {$.ajax({url:url,type:\"POST\",dataType:\"json\",cache: false,data:data,async:!1,success:function(a){successCallback(a)},error:function(b,c,d){void 0==errorCallback?show_message(b.responseJSON.error):errorCallback(b.responseJSON)}})};\r\nfunction json_async(url,data,successCallback,errorCallback) {$.ajax({url:url,type:\"POST\",dataType:\"json\",cache: false,data:data,async:1 ,success:function(a){successCallback(a)},error:function(b,c,d){void 0==errorCallback?show_message(b.responseJSON.error):errorCallback(b.responseJSON)}})};\r\nfunction ajax_post(url,data,successCallback,errorCallback)  {$.ajax({url:url,type:\"POST\",cache: true,data:data,async:true,success:function(responseText){successCallback(responseText)},error:function(xhr,ajaxOptions,thrownError){if(errorCallback){errorCallback(xhr.responseText)}else{window.alert(thrownError.message)}}})};\r\nfunction getRandID(a){if(a==undefined){a=\"rand-id-\"}var b=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\";for(var i=0;i<5;i++)a+=b.charAt(Math.floor(Math.random()*b.length));return a};\r\nvar save_with_exit = false;\r\nvar dom_is_ready = false;\r\nvar is_saving = false;\r\nvar timeout_lock_saving = null;\r\nvar backend = parent;\r\nvar page = {};\r\n\r\nfunction show_message(msg, timeout){\r\n    backend.message.quick_show(msg, timeout);\r\n}\r\nvar start_filepicker = backend.uploader.pickup;\r\n\r\nfunction parent_is_ready(){\r\n    show_message = backend.message.quick_show;\r\n    start_filepicker = backend.uploader.pickup;\r\n}\r\nif (backend.js_is_ready && backend.js_is_ready == true){\r\n    show_message = backend.message.quick_show;\r\n    start_filepicker = backend.uploader.pickup;\r\n}\r\n\r\n//window.onpopstate = function(event){\r\n//    console.log(\"iframe event\" + event);\r\n//};\r\n\r\nvar pageDOD = {\r\n    \"visual_timer\": 3,\r\n    \"onDragStart\": function(evt){\r\n        evt.preventDefault();\r\n        evt.stopPropagation();\r\n        $(\"html\").addClass(\"dropping\");\r\n        if ($(\".file_picker_div, .imgs_selector_div, .field-type-rich-text-field\").length == 0){\r\n            $(\"#dropping\").addClass(\"no_target\");\r\n        }else{\r\n            $(\"#dropping\").removeClass(\"no_target\");\r\n            $(\".file_picker_div, .imgs_selector_div\").parent().parent().addClass(\"dropping-box\");\r\n        }\r\n    },\r\n    \"onDragEnd\": function (evt){\r\n        evt.preventDefault();\r\n        evt.stopPropagation();\r\n        pageDOD.visual_timer=0;\r\n        setTimeout(pageDOD.removeVisualClass, 1000);\r\n    },\r\n    \"onDragOver\": function (evt){\r\n        evt.preventDefault();\r\n        evt.stopPropagation();\r\n        pageDOD.visual_timer=3;\r\n        $(\"html\").addClass(\"dropping\");\r\n        $(\".file_picker_div, .imgs_selector_div\").parent().parent().addClass(\"dropping-box\");\r\n    },\r\n    \"removeVisualClass\": function (){\r\n        if (pageDOD.visual_timer==0){\r\n            $(\"html\").removeClass(\"dropping\");\r\n            $(\".file_picker_div, .imgs_selector_div\").parent().parent().removeClass(\"dropping-box\");\r\n            pageDOD.visual_timer = 0;\r\n        }else{\r\n            pageDOD.visual_timer--;\r\n            setTimeout(pageDOD.removeVisualClass, 1000);\r\n        }\r\n    },\r\n    \"onDrop\": function (evt){\r\n        var files = evt.dataTransfer.files;\r\n        evt.preventDefault();\r\n        pageDOD.visual_timer=0;\r\n        $(\"html\").removeClass(\"dropping\");\r\n        $(\".file_picker_div, .imgs_selector_div\").parent().parent().removeClass(\"dropping-box\");\r\n        if (files.length > 10){\r\n            backend.message.insert(\"danger\", \"錯誤\", \"一次可上傳 10個文件\", undefined);\r\n            return;\r\n        }\r\n        for (var i=0; i<files.length; i++) {\r\n            var t = evt.target;\r\n            console.log(t);\r\n            var randId = getRandID(\"upload-\");\r\n            if ($(t).hasClass(\"form-group\")){\r\n                $(t).attr(\"data-uploadId\", randId);\r\n            }else{\r\n                $(t).parents(\".form-group\").attr(\"data-uploadId\", randId);\r\n            }\r\n            if ($(t).hasClass(\"mce-content-body\") || $(t).parents(\"body\").hasClass('mce-content-body ')){\r\n                randId = $(t).parents(\"body\").data(\"id\") || $(t).data(\"id\");\r\n                backend.uploader.addFile(files[i], randId, pageDOD.setEditorValue);\r\n            }else{\r\n                backend.uploader.addFile(files[i], randId, pageDOD.setTargetValue);\r\n            }\r\n        }\r\n    },\r\n    \"setTargetValue\": function (data){\r\n        var url = data.response.url;\r\n        var item_key = data.response.item.__key__;\r\n        var target_id = data.target_id;\r\n        var t = $(\"*[data-uploadId='\" + data.target_id + \"']\");\r\n        t.find(\"input\").first().val(data.response.url).data(\"key\", item_key).show();\r\n        if (url == \"\"){\r\n            t.find(\".file_picker_item\").css(\"background-image\", \"none\").addClass(\"file_picker_item_none\");\r\n        }else{\r\n            t.find(\".file_picker_item\").css(\"background-image\", \"url(\" + url + \")\").removeClass(\"file_picker_item_none\");\r\n            t.find(\"input\").first().change();\r\n        }\r\n    },\r\n    \"setEditorValue\": function (data){\r\n        var url = data.response.url;\r\n        var target_id = data.target_id;\r\n        if (tinyMCE.get(target_id)){\r\n            tinyMCE.get(target_id).selection.setContent('<img src=\"' + url + '\" />');\r\n        }\r\n    }\r\n};\r\nfunction change_lang(index){\r\n    $(\"a.btn-lang\").eq(index).click();\r\n}\r\nfunction create_editor(id){\r\n    var ed = tinyMCE.createEditor(id, {\r\n    theme : 'modern',\r\n    content_css : [\"/plugins/backend_ui_material/static/plugins/TinyMCE/4.2.5/skins/lightgray/content.min.css\"],\r\n    height: 400,\r\n    plugins: [\r\n    \"link image media code table preview hr anchor pagebreak textcolor fullscreen colorpicker \"\r\n    ],\r\n    toolbar: \"undo redo | styleselect | alignleft aligncenter alignright forecolor backcolor bold italic | link upload_image image media | code custom_fullscreen\",\r\n    statusbar: false,\r\n    menubar: false,\r\n    setup : function(ed) {\r\n        ed.addButton('upload_image', {\r\n            title : '插入圖片',\r\n            image : '/plugins/backend_ui_material/static/plugins/TinyMCE/4.2.5/themes/upload_image.png',\r\n            onclick : function() {\r\n                var $target_editor = ed;\r\n                start_filepicker($target_editor, true)\r\n            }\r\n        });\r\n\r\n        ed.addButton('custom_fullscreen', {\r\n            title: '擴大編輯區',\r\n            image : '/plugins/backend_ui_material/static/plugins/TinyMCE/4.2.5/themes/fullscreen.png',\r\n            onclick : function() {\r\n                ed.execCommand('mceFullScreen');\r\n                $(\".page-header\").toggle();\r\n            }\r\n        });\r\n        ed.on('init', function (e) {\r\n        });\r\n    },\r\n    convert_urls:false,\r\n    relative_urls:false,\r\n    remove_script_host:false\r\n    });\r\n    ed.render();\r\n}\r\nfunction showTimeout(callback){\r\n    hideHeader('<div style=\"margin: 100px auto; width: 40%; font-size: 18px;\">連線逾時</div>', callback);\r\n}\r\nfunction showLoading(callback){\r\n    hideHeader('<div id=\"onLoad\">' +\r\n        '<div class=\"sk-spinner sk-spinner-chasing-dots\">' +\r\n        '<div class=\"sk-dot1\"></div>' +\r\n        '<div class=\"sk-dot2\"></div>' +\r\n        '</div>' +\r\n        '</div>', callback)\r\n}\r\nfunction hideHeader(after_hide_html, callback){\r\n    $('.page-header').stop().animate({\r\n        top: -70\r\n    });\r\n    if ($('header').length == 0 && typeof callback === \"function\"){\r\n        callback();\r\n    }else{\r\n        $('header').stop().animate({\r\n            top: -70\r\n        }, 250, function(){\r\n            $('body').addClass(\"body-hide\").html(after_hide_html);\r\n            if (typeof callback === \"function\") callback();\r\n        });\r\n    }\r\n}\r\nvar currentView = \"edit\";\r\nfunction changeView(){\r\n    var view_name = backend.view.current;\r\n    $(\"body\").removeClass(\"in-view-mode\").removeClass(\"in-edit-mode\").removeClass(\"in-delete-mode\").removeClass(\"in-sort-mode\").addClass(\"in-\"+view_name+\"-mode\");\r\n}\r\nfunction changeViewAndReload(){\r\n    if (currentView != backend.view.current){\r\n        currentView = backend.view.current;\r\n        if (currentView == \"edit\" || currentView == \"view\"){\r\n            $(\"a.\"+currentView+\"-url\").first().click();\r\n        }\r\n    }\r\n}\r\nfunction save_form(){\r\n    if ($(\"form\").length <=0){ return false;}\r\n    if (is_saving == true){ return false;}\r\n    is_saving = true;\r\n    clearTimeout(timeout_lock_saving);\r\n    timeout_lock_saving = setTimeout(function(){ is_saving = false; }, 5000);\r\n    var $form = $(\"form\");\r\n    $form.find(\".field-type-rich-text-field\").each(function(){\r\n        var id = $(this).attr(\"id\");\r\n        if (tinyMCE.get(id)){\r\n            $(this).val(tinyMCE.get(id).getContent());\r\n        }\r\n        $(this).change();\r\n    });\r\n    $form.submit();\r\n}\r\nfunction save_and_exit(){\r\n    save_with_exit = true;\r\n    save_form();\r\n}\r\nfunction scrollDiv(){\r\n    $(\".scrollDiv\").addClass(\"on\");\r\n    backend.iframe.removeMask();\r\n}\r\n//  僅執行一次\r\n$(function(){\r\n    if (window.name != \"\"){\r\n        pageInit();\r\n    }\r\n    linkClickProcess();\r\n    if (window.name == \"content_iframe\") {\r\n        backend.iframe.init(\"#content_iframe\");\r\n        backend.iframe.page = page;\r\n    }\r\n    if (window.name == \"aside_iframe\") {\r\n        backend.aside.init(\"#aside_iframe\");\r\n        backend.aside.page = page;\r\n    }\r\n\r\n    $(document).on('click', function(e){\r\n        backend.ui.closeSearchBox();\r\n        backend.ui.closeMessageBox();\r\n    }).on(\"click\", \".record_item td\", function(e){\r\n        if (e.target.outerHTML.indexOf('switch-toggle') > 0 || e.target.outerHTML.indexOf('input') > 0){\r\n            return;\r\n        }\r\n        currentView = backend.view.current;\r\n        var url_targe = currentView + \"-url\";\r\n        var url = $(this).parent().data(url_targe);\r\n        if ($(this).hasClass(\"record_item\")){\r\n            url = $(this).data(url_targe);\r\n        }\r\n        if (url && url != \"\"){\r\n            console.log(currentView);\r\n            if (currentView != \"delete\"){\r\n                backend.aside.load(url);\r\n            }else{\r\n                backend.swal({\r\n                    title: \"您確定要刪除此記錄嗎\",\r\n                    text: \"删除後后将無法恢複，請谨慎操作！\",\r\n                    type: \"warning\",\r\n                    showCancelButton: true,\r\n                    confirmButtonColor: \"#DD6B55\",\r\n                    confirmButtonText: \"删除\",\r\n                    cancelButtonText: \"取消\",\r\n                    showLoaderOnConfirm: true\r\n                }).then(function(){\r\n                    json(url, null, function (data) {\r\n                        backend.swal(\"删除成功！\", \"您已经永久删除了此記錄。\", \"success\");\r\n                        backend.iframe.reload();\r\n                    }, function (data) {\r\n                        backend.swal(\"删除失敗！\", \"刪除記錄時發生問題。\", \"error\");\r\n                    })\r\n                });\r\n            }\r\n        }\r\n    }).on(\"change\", \".file_picker_div input\", function(){\r\n        var val = $(this).val();\r\n        if ($(this).parents(\".file_picker_div\").hasClass(\"image\")){\r\n            $(this).parents(\".file_picker_div\").find(\".file_picker_item\").css(\"background-image\", \"url(\" + val + \")\");\r\n        }else{\r\n            console.log(val.split(\".\")[1]);\r\n            $(this).parents(\".file_picker_div\").find(\".file_picker_item\").attr(\"data-ext\", val.split(\".\")[1]).text(val.split(\".\")[1]);\r\n        }\r\n        if ($(this).attr(\"id\") == \"avatar\"){\r\n            backend.ui.setUserInformation($(\"#name\").val(), val);\r\n        }\r\n    }).on(\"change\", \".record_item td .btn-checkbox-json\", function(){\r\n        if ($(this).is(\":checked\")){\r\n            var enable_text = $(this).data(\"enable-text\");\r\n            json($(this).data(\"enable-url\"), null, function(data){\r\n                if (data.info == \"success\"){\r\n                    backend.message.quick_info(enable_text+\"...\");\r\n                }\r\n            });\r\n        }else{\r\n            var disable_text = $(this).data(\"disable-text\");\r\n            json($(this).data(\"disable-url\"), null, function(data){\r\n                if (data.info == \"success\"){\r\n                    backend.message.quick_info(disable_text+\"...\");\r\n                }\r\n            });\r\n        }\r\n    });\r\n\r\n    key.filter = function(event){\r\n        var tagName = (event.target || event.srcElement).tagName;\r\n        key.setScope(/^(INPUT|TEXTAREA|SELECT)$/.test(tagName) ? 'input' : 'doc');\r\n        return true;\r\n    };\r\n    key(backend.shortcut.keys, 'doc', function(event, handler){ return backend.shortcut.catchEvent(window.name, handler.shortcut, handler.scope); });\r\n    key(backend.shortcut.keys, 'input', function(event, handler){ return backend.shortcut.catchEvent(window.name, handler.shortcut, handler.scope); });\r\n    window.onbeforeunload = function(){\r\n        $(document).unbind();    //remove listeners on document\r\n        $(document).find('*').unbind(); //remove listeners on all nodes\r\n        //clean up cookies\r\n        //remove items from localStorage\r\n    };\r\n});\r\nfunction setBodyClass(class_name){\r\n    $(\"body\").addClass(class_name);\r\n}\r\n//  ajax 載入時，需再執行一次\r\nfunction pageInit(new_html) {\r\n    page = {};\r\n    if (new_html){\r\n        try{\r\n            $(\"body\").html(new_html);\r\n        }catch(e){\r\n            console.log(e);\r\n        }\r\n    }\r\n    var nav_var_top = -70;\r\n    var page_header_top = 0;\r\n    var scrollDiv_top = 0;\r\n    if (window.name == \"aside_iframe\"){\r\n        nav_var_top = 0;\r\n        page_header_top = 56;\r\n        scrollDiv_top = 56;\r\n        $(\"body\").addClass(\"aside\");\r\n    }else{\r\n        //backend.iframe.setPageTitle($(\".page-header h3\").text());\r\n    }\r\n    $(\".page-header\").stop().animate({\r\n        top: nav_var_top\r\n    }, 300);\r\n    if($(\"header\").text().trim() != \"\"){\r\n        scrollDiv_top += 0;\r\n        $(\"body\").addClass(\"has-header\");\r\n        $(\"header\").stop().animate({\r\n            top: page_header_top\r\n        }, 300);\r\n    }else{\r\n        $(\"body\").addClass(\"no-header\");\r\n        if (window.name == \"content_iframe\"){\r\n            $(\"header\").hide();\r\n        }\r\n    }\r\n    $(\".aside-close\").click(function(){\r\n        backend.aside.closeUi();\r\n    });\r\n\r\n    if (window.name == \"content_iframe\"){\r\n        scrollDiv_top = 0;\r\n    }\r\n    $(\".scrollDiv\").stop().animate({\r\n        \"margin-top\": scrollDiv_top,\r\n    }, 300).hover(function(){\r\n        scrollDiv();\r\n    }, function(){\r\n        $(this).removeClass(\"on\");\r\n    }).mouseover(function(){\r\n        scrollDiv();\r\n    }).mouseleave(function() {\r\n        $(this).removeClass(\"on\");\r\n    }).css({\r\n        \"height\": \"calc(100% - \" + scrollDiv_top +\"px)\"\r\n    }).scroll(function() {\r\n        if (window.name == \"content_iframe\"){\r\n            backend.affix($(this).scrollTop());\r\n        }\r\n    });\r\n    //TODO if input has val addClass control-highlight\r\n    if (window == top) {\r\n        return;\r\n    }\r\n    //backend.iframe.afterOnLoad(location.pathname);\r\n    $(\"#onLoad\").remove();\r\n    $('body').removeClass(\"body-hide\");\r\n    checkNavItemAndShow();\r\n    try{\r\n        $(\"iframe[name='iframeForm']\").load(function(){\r\n            var j = JSON.parse($(this).contents().find(\"body\").text());\r\n            $(\".form-group\").removeClass(\"has-error has-danger\").find(\".help-block\").text(\"\");\r\n            var err = j[\"errors\"];\r\n            if (err){\r\n                for (var key in err) {\r\n                    $(\"form #\" + key).parents(\".form-group\").addClass(\"has-error has-danger\").find(\".help-block\").text(err[key]);\r\n                }\r\n                if ($(\"form\").attr(\"action\").indexOf(\"/_ah/upload/\") >= 0){\r\n                    $(\"form\").attr(\"action\", j[\"new_form_action\"]);\r\n                }\r\n            }\r\n            var msg = {\r\n                \"add\": \"記錄已新增\",\r\n                \"edit\": \"記錄已儲存\",\r\n                \"profile\": \"資料已更新\",\r\n                \"data\": \"資料已更新\",\r\n                \"config\": \"設定已變更\",\r\n                \"undefined\": \"未定義的訊息\"\r\n            };\r\n            var text = msg[j[\"response_method\"]];\r\n            if (typeof text === \"undefined\"){\r\n                text = msg[\"undefined\"];\r\n            }\r\n            if (j[\"response_info\"] == \"success\"){\r\n                if (save_with_exit){\r\n                    save_with_exit = false;\r\n                    setTimeout(backend.aside.closeUi(), 10);\r\n                    backend.message.quick_info(text);\r\n                }else{\r\n                    show_message(text, 1800);\r\n                }\r\n                backend.ui.setUserInformation($(\"#name\").val(), $(\"#avatar\").val());\r\n                if (j[\"response_method\"] == \"add\" || j[\"response_method\"] == \"edit\"){\r\n                    backend.iframe.reload(true);\r\n                }\r\n            }else{\r\n                backend.message.quick_info(\"表單欄位有誤\");\r\n            }\r\n            clearTimeout(timeout_lock_saving);\r\n            timeout_lock_saving = setTimeout(function(){\r\n                is_saving = false;\r\n            }, 3000);\r\n        });\r\n        $(\".submit_and_exit\").click(function(){\r\n            save_with_exit = true;\r\n            save_form();\r\n        });\r\n    }catch(e){\r\n\r\n    }\r\n\r\n    $(\".filepicker\").click(function(){\r\n        start_filepicker($(this).parents(\".input-group\").find(\"input\"), false);\r\n    });\r\n\r\n    tinyMCE.editors=[];\r\n    $(\".field-type-rich-text-field\").each(function() {\r\n        var label_name = $(this).prev().text();\r\n        $(this).prev().remove();\r\n        var id = $(this).attr(\"id\");\r\n        if (id == undefined){ id = $(this).attr(\"name\"); $(this).attr(\"id\", id); }\r\n        if (id) {\r\n            create_editor(id);\r\n        }\r\n    });\r\n\r\n    $('#list-table').on('post-body.bs.table', function () {\r\n        makeSortTable();\r\n        makeListOp();\r\n        checkNavItemAndShow();\r\n        $(\".sortable-list\").removeClass(\"hidden\");\r\n        $(\".fixed-table-loading\").hide();\r\n    }).bootstrapTable();\r\n\r\n    setTimeout(function(){\r\n        $(\".fbtn-container\").fadeIn();\r\n    }, 800);\r\n}\r\n// 處理頁面上的選單區塊\r\nfunction checkNavItemAndShow(){\r\n    // 預設為第一種語系欄位\r\n    $(\"a.btn-lang\").first().click();\r\n    // 沒有 相關操作 項目的話，隱藏\r\n    $(\".list-operations\").each(function(){\r\n        if ($(this).find(\"li\").length > 0){\r\n            $(this).removeClass(\"hide\");\r\n        }else{\r\n            $(this).addClass(\"hide\");\r\n        }\r\n    });\r\n    // 沒有項目的話，整個隱藏\r\n    if ($(\".nav-box li\").length > 0){\r\n        $(\".nav-box\").removeClass(\"hide\").addClass(\"animated\").addClass(\"fadeInUp\");\r\n    }\r\n}\r\n// 處理超連結按下時的動作\r\nfunction linkClickProcess(){\r\n    $(\"body\").on(\"click\", \"a\", function (e) {\r\n        var _url = $(this).attr(\"href\");\r\n        if (_url === undefined){\r\n            e.preventDefault();\r\n            return;\r\n        }\r\n        // 切換語系\r\n        if ($(this).hasClass(\"btn-lang\")) {\r\n            e.preventDefault();\r\n            var lang = $(this).data(\"lang\");\r\n            $(\"div.lang\").hide();\r\n            $(\"div.lang.lang-\" + lang).show();\r\n            return;\r\n        }\r\n        // 刪除項目\r\n        if ($(this).hasClass(\"btn-json-delete\")) {\r\n            e.preventDefault();\r\n            e.stopPropagation();\r\n            backend.swal({\r\n                title: \"您確定要刪除此記錄嗎\",\r\n                text: \"删除後后将無法恢複，請谨慎操作！\",\r\n                type: \"warning\",\r\n                showCancelButton: true,\r\n                confirmButtonColor: \"#DD6B55\",\r\n                confirmButtonText: \"删除\",\r\n                cancelButtonText: \"取消\",\r\n                showLoaderOnConfirm: true,\r\n                closeOnConfirm: false\r\n            }, function () {\r\n                json(_url, null, function (data) {\r\n                    swal(\"删除成功！\", \"您已经永久删除了此記錄。\", \"success\");\r\n                    location.reload();\r\n                }, function (data) {\r\n                    swal(\"删除失敗！\", \"刪除記錄時發生問題。\", \"error\");\r\n                })\r\n            });\r\n            return;\r\n        }\r\n        if ($(this).hasClass(\"gallery-item\")) {\r\n            e.preventDefault();\r\n            return;\r\n        }\r\n        // Json 操作\r\n        if ($(this).hasClass(\"btn-json\")) {\r\n            e.preventDefault();\r\n            var callback = $(this).data(\"callback\");\r\n            json(_url, null, function (data) {\r\n                if (callback !== undefined){\r\n                    eval(callback + '(' + JSON.stringify(data) + ')' );\r\n                }else{\r\n                    location.reload();\r\n                }\r\n            }, function(data){\r\n                if (data.code == \"404\"){\r\n                    show_message(\"找不到目標頁面\");\r\n                }else{\r\n                    show_message(data.error);\r\n                }\r\n            });\r\n            return;\r\n        }\r\n        // js 語法\r\n        if (_url.indexOf(\"javascript:\") <0 && _url.indexOf(\"#\") <0 ){\r\n            var i_text = $(this).find(\".icon\").text() ? ($(this).find(\".icon\").length>0) : \"\";\r\n            var t = $(this).text().replace(i_text, \"\").trim();\r\n            if ($(this).attr(\"target\") == \"aside_iframe\"){\r\n                backend.aside.load($(this).attr(\"href\"));\r\n            }else{\r\n                backend.iframe.load($(this).attr(\"href\"), t, location.pathname);\r\n            }\r\n            e.preventDefault();\r\n            e.stopPropagation();\r\n        }\r\n    });\r\n}\r\n// 可以排序的表格\r\nfunction makeSortTable(){\r\n    $(\"table\").stickyTableHeaders({scrollableArea: $('.scrollDiv')});\r\n    try{\r\n        $(\".sortable-list tbody\").sortable({\r\n            placeholder: \"ui-state-highlight\",\r\n            handle: 'td.move-headline',\r\n            opacity: 0.8,\r\n            //拖曳時透明\r\n            cursor: 'move',\r\n            //游標設定\r\n            axis:'y',\r\n            //只能垂直拖曳\r\n            update : function () {\r\n                var last_page_record = \"\";\r\n                var $sort = $('.sortable-list tbody');\r\n                $sort.find(\"tr\").each(function() {\r\n                    if ($(this).data(\"id\") != undefined) {\r\n                        last_page_record += \"rec[]=\" + $(this).data(\"id\") + \"&\";\r\n                    }\r\n                });\r\n                json_async(\"/admin/record/sort.json\", last_page_record + $sort.sortable('serialize'), function (data) {\r\n                    backend.message.quick_info(\"排序完成...\");\r\n                }, function (data) {\r\n                    return false;\r\n                });\r\n            }\r\n        });\r\n    }catch(e){\r\n    }\r\n}\r\nfunction makeListOp(){\r\n    if ($(\".filed-display-operations ul\").data(\"done\") == true){ return false;}\r\n    $(\"input[data-field]\").each(function () {\r\n        var field_name = $(this).data(\"field\");\r\n        var field_texe = $(this).text();\r\n        var field_val  = $(this).val();\r\n        var is_checked = \"checked\" ? $(this).attr(\"checked\"): \"\";\r\n        if (field_name != 'is_enable' && field_name != 'record_buttons' && field_name != '') {\r\n            $(\".filed-display-operations ul\").append(\r\n                '<li><input type=\"checkbox\" ' + is_checked + ' ' +\r\n                'id=\"ro-field-' + field_name + '\" ' +\r\n                'value=\"' + field_val + '\">' +\r\n                '<label for=\"ro-field-' + field_name + '\">' + $(this).parent().text() + '</label></li>'\r\n            );\r\n        }\r\n    });\r\n    $('.filed-display-operations ul input[type=checkbox]').change(function() {\r\n        var id = $(this).attr(\"id\").replace(\"ro-field-\", \"\");\r\n        var val = $(this).is(\":checked\");\r\n        $(\"input[data-field='\" + id + \"']\").click();\r\n    });\r\n    $(\".filed-display-operations ul\").attr(\"data-done\", true);\r\n}\r\n\r\n","function json(c,d,a,b){$.ajax({url:c,type:\"POST\",dataType:\"json\",cache:false,data:d,async:!1,success:function(e){a(e)},error:function(e,g,f){void 0==b?show_message(e.responseJSON.error):b(e.responseJSON)}})}function json_async(c,d,a,b){$.ajax({url:c,type:\"POST\",dataType:\"json\",cache:false,data:d,async:1,success:function(e){a(e)},error:function(e,g,f){void 0==b?show_message(e.responseJSON.error):b(e.responseJSON)}})}function ajax_post(c,d,a,b){$.ajax({url:c,type:\"POST\",cache:true,data:d,async:true,success:function(e){a(e)},error:function(g,e,f){if(b){b(g.responseText)}else{window.alert(f.message)}}})}function getRandID(d){if(d==undefined){d=\"rand-id-\"}var c=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\";for(var e=0;e<5;e++){d+=c.charAt(Math.floor(Math.random()*c.length))}return d}var save_with_exit=false;var is_saving=false;var timeout_lock_saving=null;var backend=parent;var backToList=backend.iframe.backToList;function showBackToListButton(){$(\".backToList\").show()}function show_message(b,a){backend.message.quick_show(b,a)}var start_filepicker=backend.uploader.pickup;function parent_is_ready(){show_message=backend.message.quick_show;start_filepicker=backend.uploader.pickup}if(backend.js_is_ready&&backend.js_is_ready==true){show_message=backend.message.quick_show;start_filepicker=backend.uploader.pickup}var pageDOD={visual_timer:3,init:function(){if($(\".file_picker_div, .imgs_selector_div, .field-type-rich-text-field\").length==0){$(\"#dropping\").addClass(\"no_target\")}},onDragStart:function(a){a.preventDefault();a.stopPropagation();$(\"html\").addClass(\"dropping\");$(\".file_picker_div, .imgs_selector_div\").parent().parent().addClass(\"dropping-box\")},onDragEnd:function(a){a.preventDefault();a.stopPropagation();pageDOD.visual_timer=0;setTimeout(pageDOD.removeVisualClass,1000)},onDragOver:function(a){a.preventDefault();a.stopPropagation();pageDOD.visual_timer=3;$(\"html\").addClass(\"dropping\");$(\".file_picker_div, .imgs_selector_div\").parent().parent().addClass(\"dropping-box\")},removeVisualClass:function(){if(pageDOD.visual_timer==0){$(\"html\").removeClass(\"dropping\");$(\".file_picker_div, .imgs_selector_div\").parent().parent().removeClass(\"dropping-box\");pageDOD.visual_timer=0}else{pageDOD.visual_timer--;setTimeout(pageDOD.removeVisualClass,1000)}},onDrop:function(a){var e=a.dataTransfer.files;a.preventDefault();pageDOD.visual_timer=0;$(\"html\").removeClass(\"dropping\");$(\".file_picker_div, .imgs_selector_div\").parent().parent().removeClass(\"dropping-box\");;if(e.length>10){backend.message.insert(\"danger\",\"錯誤\",\"一次可上傳 10個文件\",undefined);return}for(var c=0;c<e.length;c++){var b=a.target;var d=getRandID(\"upload-\");if($(b).hasClass(\"form-group\")){$(b).attr(\"data-uploadId\",d)}else{$(b).parents(\".form-group\").attr(\"data-uploadId\",d)}if($(b).hasClass(\"mce-content-body\")||$(b).parents(\"body\").hasClass(\"mce-content-body \")){d=$(b).parents(\"body\").data(\"id\")||$(b).data(\"id\");backend.uploader.addFile(e[c],d,pageDOD.setEditorValue)}else{backend.uploader.addFile(e[c],d,pageDOD.setTargetValue)}}},setTargetValue:function(d){var a=d.response.url;var c=d.target_id;var b=$(\"*[data-uploadId='\"+d.target_id+\"']\");b.find(\"input\").first().val(d.response.url).show();if(a==\"\"){b.find(\".file_picker_item\").css(\"background-image\",\"none\").addClass(\"file_picker_item_none\")}else{b.find(\".file_picker_item\").css(\"background-image\",\"url(\"+a+\")\").removeClass(\"file_picker_item_none\")}},setEditorValue:function(c){var a=c.response.url;var b=c.target_id;if(tinyMCE.get(b)){tinyMCE.get(b).selection.setContent('<img src=\"'+a+'\" />')}}};function change_lang(a){$(\"a.btn-lang\").eq(a).click()}function create_editor(b){var a=tinyMCE.createEditor(b,{theme:\"modern\",content_css:[\"/plugins/backend_ui_fuscata/static/TinyMCE/4.2.5/skins/lightgray/content.min.css\"],height:400,plugins:[\"link image media code table preview hr anchor pagebreak textcolor fullscreen colorpicker \"],toolbar:\"undo redo | styleselect | alignleft aligncenter alignright forecolor backcolor bold italic | link upload_image image media | code custom_fullscreen\",statusbar:false,menubar:false,setup:function(c){if(typeof filepicker!=\"undefined\"){c.addButton(\"upload_image\",{title:\"插入圖片\",image:\"/plugins/backend_ui_fuscata/static/TinyMCE/4.2.5/themes/upload_image.png\",onclick:function(){var d=c;start_filepicker(d,true)}})}c.addButton(\"custom_fullscreen\",{title:\"擴大編輯區\",image:\"/plugins/backend_ui_fuscata/static/TinyMCE/4.2.5/themes/fullscreen.png\",onclick:function(){c.execCommand(\"mceFullScreen\")}});c.on(\"init\",function(d){})},convert_urls:false,relative_urls:false,remove_script_host:false});a.render()}function save_form(){if($(\"form\").length<=0){return false}if(is_saving==true){return false}console.log(is_saving);is_saving=true;clearTimeout(timeout_lock_saving);timeout_lock_saving=setTimeout(function(){is_saving=false},5000);var a=$(\"form\");a.find(\".field-type-rich-text-field\").each(function(){var b=$(this).attr(\"id\");if(tinyMCE.get(b)){$(this).val(tinyMCE.get(b).getContent())}$(this).change()});a.submit()}function save_and_exit(){save_with_exit=true;save_form()}function scrollDiv(){$(\".scrollDiv\").addClass(\"on\");backend.iframe.removeMask()}$(function(){var a=-70;var b=0;var d=0;if(window.name==\"aside_iframe\"){a=0;b=56;d=60;$(\"body\").addClass(\"aside\")}$(\".page-header\").stop().animate({top:a},300);if($(\"header\").text().trim()!=\"\"){d+=60;$(\"body\").addClass(\"has-header\");$(\"header\").stop().animate({top:b},300);if(a>=0){backend.affix(100)}}else{$(\"body\").addClass(\"no-header\")}$(\".aside-close\").click(function(){backend.aside.closeUi()});$(\".scrollDiv\").stop().animate({\"margin-top\":d},300).hover(function(){scrollDiv()},function(){$(this).removeClass(\"on\")}).mouseover(function(){scrollDiv()}).mouseleave(function(){$(this).removeClass(\"on\")});if(window==top){return}$(\"#onLoad\").remove();$(\"body\").removeClass(\"body-hide\");$(document).on(\"click\",function(f){backend.close_msg_nav()}).on(\"click\",\".record_item, .record_item\",function(){var e=$(this).parent().data(\"view-url\");if($(this).hasClass(\"record_item\")){e=$(this).data(\"view-url\")}if(e&&e!=\"\"){backend.aside.load(e)}}).on(\"keydown\",function(f){backend.short_key(window.name,f)});pageDOD.init();linkClickProcess();checkNavItemAndShow();$(\".enter-sorting-mode\").click(function(){$(\"body\").toggleClass(\"in-sort-mode\",\"\")});$(\"#list-table\").on(\"post-body.bs.table\",function(){makeSortTable();makeListOp();checkNavItemAndShow();$(\".sortable-list\").removeClass(\"hidden\")});try{$(\"iframe[name='iframeForm']\").load(function(){var e=JSON.parse($(this).contents().find(\"body\").text());$(\".form-group\").removeClass(\"has-error has-danger\").find(\".help-block\").text(\"\");var g=e.errors;if(g){for(var f in g){$(\"form #\"+f).parents(\".form-group\").addClass(\"has-error has-danger\").find(\".help-block\").text(g[f])}if($(\"form\").attr(\"action\").indexOf(\"/_ah/upload/\")>=0){$(\"form\").attr(\"action\",e.new_form_action)}}var h={add:\"記錄已新增\",edit:\"記錄已儲存\",profile:\"資料已更新\",\"undefined\":\"未定義的訊息\"};if(e.response_info==\"success\"){if(save_with_exit){setTimeout(backend.aside.closeUi(),10);backend.message.quick_info(h[e.response_method])}else{show_message(h[e.response_method],1800)}}else{backend.message.quick_info(\"表單欄位有誤\")}clearTimeout(timeout_lock_saving);timeout_lock_saving=setTimeout(function(){is_saving=false},3000)});$(\".submit_and_exit\").click(function(){save_with_exit=true;save_form()})}catch(c){}$(\".file_picker_div input\").on(\"change\",function(){var e=$(this).val();$(this).parents(\".file_picker_div\").find(\".file_picker_item\").css(\"background-image\",\"url(\"+e+\")\");if($(this).attr(\"id\")==\"avatar\"){backend.set_avatar(location.href,e)}});$(\".filepicker\").click(function(){start_filepicker($(this).parents(\".file_picker_div\").find(\"input\"))});tinyMCE.editors=[];$(\".field-type-rich-text-field\").each(function(){var e=$(this).prev().text();$(this).prev().remove();var f=$(this).attr(\"id\");if(f==undefined){f=$(this).attr(\"name\");$(this).attr(\"id\",f)}if(f){create_editor(f)}});window.onbeforeunload=function(){$(document).unbind();$(document).find(\"*\").unbind()};setTimeout(function(){$(\".fbtn-container\").fadeIn()},1000)});function checkNavItemAndShow(){$(\"a.btn-lang\").first().click();$(\".list-operations\").each(function(){if($(this).find(\"li\").length>0){$(this).removeClass(\"hide\")}else{$(this).addClass(\"hide\")}});if($(\".nav-box li\").length>0){$(\".nav-box\").removeClass(\"hide\").addClass(\"animated\").addClass(\"fadeInUp\")}}function linkClickProcess(){$(\"body\").on(\"click\",\"a\",function(e){var _url=$(this).attr(\"href\");if(_url===undefined){e.preventDefault();return}if($(this).hasClass(\"btn-lang\")){e.preventDefault();var lang=$(this).data(\"lang\");$(\"div.lang\").hide();$(\"div.lang.lang-\"+lang).show();return}if($(this).hasClass(\"btn-json-delete\")){e.preventDefault();e.stopPropagation();backend.swal({title:\"您確定要刪除此記錄嗎\",text:\"删除後后将無法恢複，請谨慎操作！\",type:\"warning\",showCancelButton:true,confirmButtonColor:\"#DD6B55\",confirmButtonText:\"删除\",cancelButtonText:\"取消\",showLoaderOnConfirm:true,closeOnConfirm:false},function(){json(_url,null,function(data){swal(\"删除成功！\",\"您已经永久删除了此記錄。\",\"success\");location.reload()},function(data){swal(\"删除失敗！\",\"刪除記錄時發生問題。\",\"error\")})});return}if($(this).hasClass(\"btn-json\")){e.preventDefault();var callback=$(this).data(\"callback\");json(_url,null,function(data){if(callback!==undefined){eval(callback+\"(\"+JSON.stringify(data)+\")\")}else{location.reload()}},function(data){if(data.code==\"404\"){show_message(\"找不到目標頁面\")}else{show_message(data.error)}});return}if(_url.indexOf(\"javascript:\")<0&&_url.indexOf(\"#\")<0){var i_text=$(this).find(\".icon\").text()?($(this).find(\".icon\").length>0):\"\";var t=$(this).text().replace(i_text,\"\").trim();if($(this).attr(\"target\")!=\"aside_iframe\"){backend.iframe.load($(this).attr(\"href\"),t,location.pathname)}else{backend.aside.load($(this).attr(\"href\"))}}})}function makeSortTable(){try{$(\".sortable-list tbody\").sortable({placeholder:\"ui-state-highlight\",handle:\"td.move-headline\",opacity:0.8,cursor:\"move\",axis:\"y\",update:function(){var c=\"\";var b=$(\".sortable-list tbody\");b.find(\"tr\").each(function(){if($(this).data(\"id\")!=undefined){c+=\"rec[]=\"+$(this).data(\"id\")+\"&\"}});json_async(\"/admin/record/sort.json\",c+b.sortable(\"serialize\"),function(d){backend.message.quick_info(\"排序完成...\")},function(d){return false})}})}catch(a){}}function makeListOp(){if($(\".filed-display-operations ul\").data(\"done\")==true){return false}$(\"input[data-field]\").each(function(){var c=$(this).data(\"field\");var b=$(this).text();var d=$(this).val();var a=\"checked\"?$(this).attr(\"checked\"):\"\";if(c!=\"is_enable\"&&c!=\"record_buttons\"&&c!=\"\"){$(\".filed-display-operations ul\").append('<li><input type=\"checkbox\" '+a+' id=\"ro-field-'+c+'\" value=\"'+d+'\"><label for=\"ro-field-'+c+'\">'+$(this).parent().text()+\"</label></li>\")}});$(\".filed-display-operations ul input[type=checkbox]\").change(function(){var b=$(this).attr(\"id\").replace(\"ro-field-\",\"\");var a=$(this).is(\":checked\");$(\"input[data-field='\"+b+\"']\").click()});$(\".filed-display-operations ul\").attr(\"data-done\",true)};"]}