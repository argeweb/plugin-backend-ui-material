{% import "backend/macros.html" as s with context %}
{% extends s.layout() %}
{%- block layout_header -%}
    {%- if scaffolding %}
{#        {% if uri_exists_with_permission(action="add") -%}<a class="btn btn-red btn-create" href="{{ uri_action_link('add') }}"><i class="icon">edit</i>{{ s.scaffold_title("add") }}</a>{%- endif -%}#}
        {% block partial_related_area %}{{ s.partial_include('partial_related_area_in_page.html') }}{% endblock %}
{#        {% block partial_list_area %}{{ s.partial_include('partial_nav_lang.html') }}{% endblock %}#}
    {%- endif %}
{% endblock %}

{% block layout_content %}
<div class="wrapper wrapper-content">
    <iframe name="iframeForm" width="0" height="0" frameborder="0" seamless style="position: absolute; top: -100px;"></iframe>
    <form method="{% block form_tag_method %}POST{% endblock %}"
          class="{% block form_tag_class %}form-horizontal row{% endblock %}"
          action="{% block form_tag_action %}{{ scaffolding.form_action|default(uri(_pass_all=True), True) }}{% endblock %}"
          enctype="{% block form_tag_enctype %}{{ scaffolding.form_encoding|default('application/json', True) }}{% endblock %}"
          accept-charset="{% block form_tag_charset %}UTF-8{% endblock %}"
          target="{% block form_tag_target %}iframeForm{% endblock %}" role="form">
        {% block form_body %}
        <div class="col-sm-12" style=" margin-top: 10px;margin-bottom: 30px;">
            <div class="tabs-container form-tabs">
                {% if scaffolding.form_tab_pages %}
                <ul class="nav nav-tabs">{% for tab_page in scaffolding.form_tab_pages -%}{% if loop.index == 1 %}
                    <li class="active"><a data-toggle="tab" href="#tab-{{ loop.index }}" aria-expanded="true"> {{ tab_page }}</a></li>{% else %}
                    <li class=""><a data-toggle="tab" href="#tab-2" aria-expanded="false">{{ tab_page }}</a></li>{% endif %}{% endfor -%}
                </ul>
                {% endif %}
                <div class="tab-content">
                {% block form_content %}
                    <div id="tab-1" class="tab-pane active">
                        <div class="panel-body">
                                {{ events.before_form_fields() }}
                                <div class="row">
                                    {%- block form_fields %}{%- for field in form %}
                                        {% if not field.name in scaffolding.excluded_properties_in_from %}{{ s.form_field(form, field) }}{% endif %}
                                    {%- endfor %}{%- endblock %}

                                    {% block form_actions %}
                                    <div class="col-xs-12 text-right">
                                        {% block submit_button -%}
                                        <button type="submit" class="btn btn-sm btn-primary"><i class="icon">save</i> {% block submit_text %}{% endblock %}</button>
                                        <a class="backToList btn btn-white btn-sm"><i class="icon">close</i></a>
                                        {%- endblock %}
                                    </div>
                                    {% endblock %}
                                </div>
                                {{ events.after_form_fields() }}
                        </div>
                    </div>
                    <div id="tab-2" class="tab-pane">
                        <div class="panel-body">
                            <strong>移动设备优先</strong>
                            <p>在 Bootstrap 2 中，我们对框架中的某些关键部分增加了对移动设备友好的样式。而在 Bootstrap 3 中，我们重写了整个框架，使其一开始就是对移动设备友好的。这次不是简单的增加一些可选的针对移动设备的样式，而是直接融合进了框架的内核中。也就是说，Bootstrap 是移动设备优先的。针对移动设备的样式融合进了框架的每个角落，而不是增加一个额外的文件。</p>
                        </div>
                    </div>
                {% endblock %}
                </div>
            </div>

            <input type="hidden" name="returnType" value="json" />
            <input type="hidden" name="routeAction" value="{{ route.action }}" />
            <input type="hidden" name="routeName" value="{{ route.name }}" />
        </div>
        {% endblock %}
    </form>
</div>
{% endblock %}

{% block layout_buttons %}
    <a class="fbtn fbtn-lg fbtn-brand-accent waves-attach waves-circle waves-light" href="javascript: save_form();"><span class="fbtn-text fbtn-text-left">{% block submit_text_f %}{% endblock %}</span><span class="icon icon-lg">save</span></a>
{% endblock %}
