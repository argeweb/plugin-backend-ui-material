{"version":3,"sources":["plugin.min.js"],"names":["tinymce","PluginManager","add","a","b","className","indexOf","parentNode","c","dom","each","select","test","style","position","hasVisual","addClass","removeClass","d","e","f","g","selection","getNode","h","i","walk","getBody","nodeType","push","length","zIndex","parseInt","execCommand","getPos","getParent","left","x","top","y","width","height","class","getContent","getLang","Env","ie","setHTML","innerHTML","toLowerCase","setStyles","setAttrib","addVisual","nodeChanged","addCommand","addButton","title","cmd","on","getDoc","target","gecko","designMode","body","removeChild","appendChild"],"mappings":"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","file":"plugin.min.js","sourcesContent":["tinymce.PluginManager.add(\"layer\",function(a){function b(a){do if(a.className&&-1!=a.className.indexOf(\"mceItemLayer\"))return a;while(a=a.parentNode)}function c(b){var c=a.dom;tinymce.each(c.select(\"div,p\",b),function(a){/^(absolute|relative|fixed)$/i.test(a.style.position)&&(a.hasVisual?c.addClass(a,\"mceItemVisualAid\"):c.removeClass(a,\"mceItemVisualAid\"),c.addClass(a,\"mceItemLayer\"))})}function d(c){var d,e,f=[],g=b(a.selection.getNode()),h=-1,i=-1;for(e=[],tinymce.walk(a.getBody(),function(a){1==a.nodeType&&/^(absolute|relative|static)$/i.test(a.style.position)&&e.push(a)},\"childNodes\"),d=0;d<e.length;d++)f[d]=e[d].style.zIndex?parseInt(e[d].style.zIndex,10):0,0>h&&e[d]==g&&(h=d);if(0>c){for(d=0;d<f.length;d++)if(f[d]<f[h]){i=d;break}i>-1?(e[h].style.zIndex=f[i],e[i].style.zIndex=f[h]):f[h]>0&&(e[h].style.zIndex=f[h]-1)}else{for(d=0;d<f.length;d++)if(f[d]>f[h]){i=d;break}i>-1?(e[h].style.zIndex=f[i],e[i].style.zIndex=f[h]):e[h].style.zIndex=f[h]+1}a.execCommand(\"mceRepaint\")}function e(){var b=a.dom,c=b.getPos(b.getParent(a.selection.getNode(),\"*\")),d=a.getBody();a.dom.add(d,\"div\",{style:{position:\"absolute\",left:c.x,top:c.y>20?c.y:20,width:100,height:100},class:\"mceItemVisualAid mceItemLayer\"},a.selection.getContent()||a.getLang(\"layer.content\")),tinymce.Env.ie&&b.setHTML(d,d.innerHTML)}function f(){var c=b(a.selection.getNode());c||(c=a.dom.getParent(a.selection.getNode(),\"DIV,P,IMG\")),c&&(\"absolute\"==c.style.position.toLowerCase()?(a.dom.setStyles(c,{position:\"\",left:\"\",top:\"\",width:\"\",height:\"\"}),a.dom.removeClass(c,\"mceItemVisualAid\"),a.dom.removeClass(c,\"mceItemLayer\")):(c.style.left||(c.style.left=\"20px\"),c.style.top||(c.style.top=\"20px\"),c.style.width||(c.style.width=c.width?c.width+\"px\":\"100px\"),c.style.height||(c.style.height=c.height?c.height+\"px\":\"100px\"),c.style.position=\"absolute\",a.dom.setAttrib(c,\"data-mce-style\",\"\"),a.addVisual(a.getBody())),a.execCommand(\"mceRepaint\"),a.nodeChanged())}a.addCommand(\"mceInsertLayer\",e),a.addCommand(\"mceMoveForward\",function(){d(1)}),a.addCommand(\"mceMoveBackward\",function(){d(-1)}),a.addCommand(\"mceMakeAbsolute\",function(){f()}),a.addButton(\"moveforward\",{title:\"layer.forward_desc\",cmd:\"mceMoveForward\"}),a.addButton(\"movebackward\",{title:\"layer.backward_desc\",cmd:\"mceMoveBackward\"}),a.addButton(\"absolute\",{title:\"layer.absolute_desc\",cmd:\"mceMakeAbsolute\"}),a.addButton(\"insertlayer\",{title:\"layer.insertlayer_desc\",cmd:\"mceInsertLayer\"}),a.on(\"init\",function(){tinymce.Env.ie&&a.getDoc().execCommand(\"2D-Position\",!1,!0)}),a.on(\"mouseup\",function(c){var d=b(c.target);d&&a.dom.setAttrib(d,\"data-mce-style\",\"\")}),a.on(\"mousedown\",function(c){var d,e=c.target,f=a.getDoc();tinymce.Env.gecko&&(b(e)?\"on\"!==f.designMode&&(f.designMode=\"on\",e=f.body,d=e.parentNode,d.removeChild(e),d.appendChild(e)):\"on\"==f.designMode&&(f.designMode=\"off\"))}),a.on(\"NodeChange\",c)});\n//# sourceMappingURL=plugin.min.js.map"]}