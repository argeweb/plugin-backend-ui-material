{"version":3,"sources":["plugin.min.js"],"names":["tinymce","PluginManager","add","a","b","c","d","parentNode","removeChild","width","height","document","createElement","onload","Math","max","clientWidth","clientHeight","onerror","e","style","visibility","position","bottom","left","body","appendChild","src","each","text","title","menu","value","push","settings","image_list","util","XHR","send","url","success","JSON","parse","l","find","checked","m","n","round","isNaN","f","selection","select","nodeChanged","q","t","r","setAttribs","j","extend","toJSON","alt","class","undoManager","transact","s","id","focus","setContent","createHTML","get","setAttrib","remove","g","replace","h","meta","o","convertURL","this","image_prepend_url","RegExp","test","substring","length","documentBaseURI","toAbsolute","i","margin","split","image_advtab","parseStyle","vspace","hspace","border","serializeStyle","k","p","dom","getNode","image_dimensions","getAttrib","nodeName","getAttribute","type","label","values","onselect","lastControl","control","fire","onPostRender","image_class_list","name","textStyle","formatter","getCssText","inline","classes","u","filetype","autofocus","onchange","image_description","image_title","layout","direction","align","spacing","items","maxLength","size","ariaLabel","marginLeft","marginRight","marginTop","marginBottom","borderWidth","windowManager","open","data","bodyType","pack","packV","columns","padding","alignH","defaults","maxWidth","onSubmit","addButton","icon","tooltip","onclick","stateSelector","addMenuItem","context","prependToContext","addCommand"],"mappings":"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","file":"plugin.min.js","sourcesContent":["tinymce.PluginManager.add(\"image\",function(a){function b(a,b){function c(a,c){d.parentNode&&d.parentNode.removeChild(d),b({width:a,height:c})}var d=document.createElement(\"img\");d.onload=function(){c(Math.max(d.width,d.clientWidth),Math.max(d.height,d.clientHeight))},d.onerror=function(){c()};var e=d.style;e.visibility=\"hidden\",e.position=\"fixed\",e.bottom=e.left=0,e.width=e.height=\"auto\",document.body.appendChild(d),d.src=a}function c(a,b,c){function d(a,c){return c=c||[],tinymce.each(a,function(a){var e={text:a.text||a.title};a.menu?e.menu=d(a.menu):(e.value=a.value,b(e)),c.push(e)}),c}return d(a,c||[])}function d(b){return function(){var c=a.settings.image_list;\"string\"==typeof c?tinymce.util.XHR.send({url:c,success:function(a){b(tinymce.util.JSON.parse(a))}}):\"function\"==typeof c?c(b):b(c)}}function e(d){function e(){var a,b,c,d;a=l.find(\"#width\")[0],b=l.find(\"#height\")[0],a&&b&&(c=a.value(),d=b.value(),l.find(\"#constrain\")[0].checked()&&m&&n&&c&&d&&(m!=c?(d=Math.round(c/m*d),isNaN(d)||b.value(d)):(c=Math.round(d/n*c),isNaN(c)||a.value(c))),m=c,n=d)}function f(){function b(b){function c(){b.onload=b.onerror=null,a.selection&&(a.selection.select(b),a.nodeChanged())}b.onload=function(){q.width||q.height||!t||r.setAttribs(b,{width:b.clientWidth,height:b.clientHeight}),c()},b.onerror=c}j(),e(),q=tinymce.extend(q,l.toJSON()),q.alt||(q.alt=\"\"),q.title||(q.title=\"\"),\"\"===q.width&&(q.width=null),\"\"===q.height&&(q.height=null),q.style||(q.style=null),q={src:q.src,alt:q.alt,title:q.title,width:q.width,height:q.height,style:q.style,class:q.class},a.undoManager.transact(function(){return q.src?(\"\"===q.title&&(q.title=null),s?r.setAttribs(s,q):(q.id=\"__mcenew\",a.focus(),a.selection.setContent(r.createHTML(\"img\",q)),s=r.get(\"__mcenew\"),r.setAttrib(s,\"id\",null)),void b(s)):void(s&&(r.remove(s),a.focus(),a.nodeChanged()))})}function g(a){return a&&(a=a.replace(/px$/,\"\")),a}function h(c){var d,e,f,g=c.meta||{};o&&o.value(a.convertURL(this.value(),\"src\")),tinymce.each(g,function(a,b){l.find(\"#\"+b).value(a)}),g.width||g.height||(d=a.convertURL(this.value(),\"src\"),e=a.settings.image_prepend_url,f=new RegExp(\"^(?:[a-z]+:)?//\",\"i\"),e&&!f.test(d)&&d.substring(0,e.length)!==e&&(d=e+d),this.value(d),b(a.documentBaseURI.toAbsolute(this.value()),function(a){a.width&&a.height&&t&&(m=a.width,n=a.height,l.find(\"#width\").value(m),l.find(\"#height\").value(n))}))}function i(a){if(a.margin){var b=a.margin.split(\" \");switch(b.length){case 1:a[\"margin-top\"]=a[\"margin-top\"]||b[0],a[\"margin-right\"]=a[\"margin-right\"]||b[0],a[\"margin-bottom\"]=a[\"margin-bottom\"]||b[0],a[\"margin-left\"]=a[\"margin-left\"]||b[0];break;case 2:a[\"margin-top\"]=a[\"margin-top\"]||b[0],a[\"margin-right\"]=a[\"margin-right\"]||b[1],a[\"margin-bottom\"]=a[\"margin-bottom\"]||b[0],a[\"margin-left\"]=a[\"margin-left\"]||b[1];break;case 3:a[\"margin-top\"]=a[\"margin-top\"]||b[0],a[\"margin-right\"]=a[\"margin-right\"]||b[1],a[\"margin-bottom\"]=a[\"margin-bottom\"]||b[2],a[\"margin-left\"]=a[\"margin-left\"]||b[1];break;case 4:a[\"margin-top\"]=a[\"margin-top\"]||b[0],a[\"margin-right\"]=a[\"margin-right\"]||b[1],a[\"margin-bottom\"]=a[\"margin-bottom\"]||b[2],a[\"margin-left\"]=a[\"margin-left\"]||b[3]}delete a.margin}return a}function j(){function b(a){return a.length>0&&/^[0-9]+$/.test(a)&&(a+=\"px\"),a}if(a.settings.image_advtab){var c=l.toJSON(),d=r.parseStyle(c.style);d=i(d),c.vspace&&(d[\"margin-top\"]=d[\"margin-bottom\"]=b(c.vspace)),c.hspace&&(d[\"margin-left\"]=d[\"margin-right\"]=b(c.hspace)),c.border&&(d[\"border-width\"]=b(c.border)),l.find(\"#style\").value(r.serializeStyle(r.parseStyle(r.serializeStyle(d))))}}function k(){if(a.settings.image_advtab){var b=l.toJSON(),c=r.parseStyle(b.style);l.find(\"#vspace\").value(\"\"),l.find(\"#hspace\").value(\"\"),c=i(c),(c[\"margin-top\"]&&c[\"margin-bottom\"]||c[\"margin-right\"]&&c[\"margin-left\"])&&(c[\"margin-top\"]===c[\"margin-bottom\"]?l.find(\"#vspace\").value(g(c[\"margin-top\"])):l.find(\"#vspace\").value(\"\"),c[\"margin-right\"]===c[\"margin-left\"]?l.find(\"#hspace\").value(g(c[\"margin-right\"])):l.find(\"#hspace\").value(\"\")),c[\"border-width\"]&&l.find(\"#border\").value(g(c[\"border-width\"])),l.find(\"#style\").value(r.serializeStyle(r.parseStyle(r.serializeStyle(c))))}}var l,m,n,o,p,q={},r=a.dom,s=a.selection.getNode(),t=a.settings.image_dimensions!==!1;m=r.getAttrib(s,\"width\"),n=r.getAttrib(s,\"height\"),\"IMG\"!=s.nodeName||s.getAttribute(\"data-mce-object\")||s.getAttribute(\"data-mce-placeholder\")?s=null:q={src:r.getAttrib(s,\"src\"),alt:r.getAttrib(s,\"alt\"),title:r.getAttrib(s,\"title\"),class:r.getAttrib(s,\"class\"),width:m,height:n},d&&(o={type:\"listbox\",label:\"Image list\",values:c(d,function(b){b.value=a.convertURL(b.value||b.url,\"src\")},[{text:\"None\",value:\"\"}]),value:q.src&&a.convertURL(q.src,\"src\"),onselect:function(a){var b=l.find(\"#alt\");(!b.value()||a.lastControl&&b.value()==a.lastControl.text())&&b.value(a.control.text()),l.find(\"#src\").value(a.control.value()).fire(\"change\")},onPostRender:function(){o=this}}),a.settings.image_class_list&&(p={name:\"class\",type:\"listbox\",label:\"Class\",values:c(a.settings.image_class_list,function(b){b.value&&(b.textStyle=function(){return a.formatter.getCssText({inline:\"img\",classes:[b.value]})})})});var u=[{name:\"src\",type:\"filepicker\",filetype:\"image\",label:\"Source\",autofocus:!0,onchange:h},o];a.settings.image_description!==!1&&u.push({name:\"alt\",type:\"textbox\",label:\"Image description\"}),a.settings.image_title&&u.push({name:\"title\",type:\"textbox\",label:\"Image Title\"}),t&&u.push({type:\"container\",label:\"Dimensions\",layout:\"flex\",direction:\"row\",align:\"center\",spacing:5,items:[{name:\"width\",type:\"textbox\",maxLength:5,size:3,onchange:e,ariaLabel:\"Width\"},{type:\"label\",text:\"x\"},{name:\"height\",type:\"textbox\",maxLength:5,size:3,onchange:e,ariaLabel:\"Height\"},{name:\"constrain\",type:\"checkbox\",checked:!0,text:\"Constrain proportions\"}]}),u.push(p),a.settings.image_advtab?(s&&(s.style.marginLeft&&s.style.marginRight&&s.style.marginLeft===s.style.marginRight&&(q.hspace=g(s.style.marginLeft)),s.style.marginTop&&s.style.marginBottom&&s.style.marginTop===s.style.marginBottom&&(q.vspace=g(s.style.marginTop)),s.style.borderWidth&&(q.border=g(s.style.borderWidth)),q.style=a.dom.serializeStyle(a.dom.parseStyle(a.dom.getAttrib(s,\"style\")))),l=a.windowManager.open({title:\"Insert/edit image\",data:q,bodyType:\"tabpanel\",body:[{title:\"General\",type:\"form\",items:u},{title:\"Advanced\",type:\"form\",pack:\"start\",items:[{label:\"Style\",name:\"style\",type:\"textbox\",onchange:k},{type:\"form\",layout:\"grid\",packV:\"start\",columns:2,padding:0,alignH:[\"left\",\"right\"],defaults:{type:\"textbox\",maxWidth:50,onchange:j},items:[{label:\"Vertical space\",name:\"vspace\"},{label:\"Horizontal space\",name:\"hspace\"},{label:\"Border\",name:\"border\"}]}]}],onSubmit:f})):l=a.windowManager.open({title:\"Insert/edit image\",data:q,body:u,onSubmit:f})}a.addButton(\"image\",{icon:\"image\",tooltip:\"Insert/edit image\",onclick:d(e),stateSelector:\"img:not([data-mce-object],[data-mce-placeholder])\"}),a.addMenuItem(\"image\",{icon:\"image\",text:\"Insert/edit image\",onclick:d(e),context:\"insert\",prependToContext:!0}),a.addCommand(\"mceImage\",d(e))});\n//# sourceMappingURL=plugin.min.js.map"]}