{"version":3,"sources":["plugin.min.js"],"names":["tinymce","PluginManager","add","a","b","c","settings","link_list","util","XHR","send","url","success","JSON","parse","d","each","e","text","title","menu","value","push","l","find","lastControl","control","dom","select","name","id","selected","indexOf","length","unshift","type","label","values","onselect","f","k","u","m","this","parent","g","meta","o","convertURL","call","h","v","getContent","test","childNodes","nodeType","i","j","n","p","q","r","s","t","selection","w","getNode","getParent","innerText","textContent","format","href","getAttrib","target","default_link_target","rel","class","size","onchange","onPostRender","target_list","rel_list","link_class_list","textStyle","formatter","getCssText","inline","classes","link_title","windowManager","open","data","body","filetype","autofocus","onkeyup","onSubmit","getRng","window","setTimeout","confirm","setRng","focus","setAttribs","undoManager","insertContent","createHTML","encode","execCommand","extend","link_assume_external_targets","addButton","icon","tooltip","shortcut","onclick","stateSelector","cmd","addShortcut","addCommand","showDialog","addMenuItem","context","prependToContext"],"mappings":"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","file":"plugin.min.js","sourcesContent":["tinymce.PluginManager.add(\"link\",function(a){function b(b){return function(){var c=a.settings.link_list;\"string\"==typeof c?tinymce.util.XHR.send({url:c,success:function(a){b(tinymce.util.JSON.parse(a))}}):\"function\"==typeof c?c(b):b(c)}}function c(a,b,c){function d(a,c){return c=c||[],tinymce.each(a,function(a){var e={text:a.text||a.title};a.menu?e.menu=d(a.menu):(e.value=a.value,b&&b(e)),c.push(e)}),c}return d(a,c||[])}function d(b){function d(a){var b=l.find(\"#text\");(!b.value()||a.lastControl&&b.value()==a.lastControl.text())&&b.value(a.control.text()),l.find(\"#href\").value(a.control.value())}function e(b){var c=[];return tinymce.each(a.dom.select(\"a:not([href])\"),function(a){var d=a.name||a.id;d&&c.push({text:d,value:\"#\"+d,selected:-1!=b.indexOf(\"#\"+d)})}),c.length?(c.unshift({text:\"None\",value:\"\"}),{name:\"anchor\",type:\"listbox\",label:\"Anchors\",values:c,onselect:d}):void 0}function f(){!k&&0===u.text.length&&m&&this.parent().parent().find(\"#text\")[0].value(this.value())}function g(b){var c=b.meta||{};o&&o.value(a.convertURL(this.value(),\"href\")),tinymce.each(b.meta,function(a,b){l.find(\"#\"+b).value(a)}),c.text||f.call(this)}function h(a){var b=v.getContent();if(/</.test(b)&&(!/^<a [^>]+>[^<]+<\\/a>$/.test(b)||-1==b.indexOf(\"href=\")))return!1;if(a){var c,d=a.childNodes;if(0===d.length)return!1;for(c=d.length-1;c>=0;c--)if(3!=d[c].nodeType)return!1}return!0}var i,j,k,l,m,n,o,p,q,r,s,t,u={},v=a.selection,w=a.dom;i=v.getNode(),j=w.getParent(i,\"a[href]\"),m=h(),u.text=k=j?j.innerText||j.textContent:v.getContent({format:\"text\"}),u.href=j?w.getAttrib(j,\"href\"):\"\",j?u.target=w.getAttrib(j,\"target\"):a.settings.default_link_target&&(u.target=a.settings.default_link_target),(t=w.getAttrib(j,\"rel\"))&&(u.rel=t),(t=w.getAttrib(j,\"class\"))&&(u.class=t),(t=w.getAttrib(j,\"title\"))&&(u.title=t),m&&(n={name:\"text\",type:\"textbox\",size:40,label:\"Text to display\",onchange:function(){u.text=this.value()}}),b&&(o={type:\"listbox\",label:\"Link list\",values:c(b,function(b){b.value=a.convertURL(b.value||b.url,\"href\")},[{text:\"None\",value:\"\"}]),onselect:d,value:a.convertURL(u.href,\"href\"),onPostRender:function(){o=this}}),a.settings.target_list!==!1&&(a.settings.target_list||(a.settings.target_list=[{text:\"None\",value:\"\"},{text:\"New window\",value:\"_blank\"}]),q={name:\"target\",type:\"listbox\",label:\"Target\",values:c(a.settings.target_list)}),a.settings.rel_list&&(p={name:\"rel\",type:\"listbox\",label:\"Rel\",values:c(a.settings.rel_list)}),a.settings.link_class_list&&(r={name:\"class\",type:\"listbox\",label:\"Class\",values:c(a.settings.link_class_list,function(b){b.value&&(b.textStyle=function(){return a.formatter.getCssText({inline:\"a\",classes:[b.value]})})})}),a.settings.link_title!==!1&&(s={name:\"title\",type:\"textbox\",label:\"Title\",value:u.title}),l=a.windowManager.open({title:\"Insert link\",data:u,body:[{name:\"href\",type:\"filepicker\",filetype:\"file\",size:40,autofocus:!0,label:\"Url\",onchange:g,onkeyup:f},n,s,e(u.href),o,p,q,r],onSubmit:function(b){function c(b,c){var d=a.selection.getRng();window.setTimeout(function(){a.windowManager.confirm(b,function(b){a.selection.setRng(d),c(b)})},0)}function d(){var b={href:e,target:u.target?u.target:null,rel:u.rel?u.rel:null,class:u.class?u.class:null,title:u.title?u.title:null};j?(a.focus(),m&&u.text!=k&&(\"innerText\"in j?j.innerText=u.text:j.textContent=u.text),w.setAttribs(j,b),v.select(j),a.undoManager.add()):m?a.insertContent(w.createHTML(\"a\",b,w.encode(u.text))):a.execCommand(\"mceInsertLink\",!1,b)}var e;return u=tinymce.extend(u,b.data),(e=u.href)?e.indexOf(\"@\")>0&&-1==e.indexOf(\"//\")&&-1==e.indexOf(\"mailto:\")?void c(\"The URL you entered seems to be an email address. Do you want to add the required mailto: prefix?\",function(a){a&&(e=\"mailto:\"+e),d()}):a.settings.link_assume_external_targets&&!/^\\w+:/i.test(e)||!a.settings.link_assume_external_targets&&/^\\s*www[\\.|\\d\\.]/i.test(e)?void c(\"The URL you entered seems to be an external link. Do you want to add the required http:// prefix?\",function(a){a&&(e=\"http://\"+e),d()}):void d():void a.execCommand(\"unlink\")}})}a.addButton(\"link\",{icon:\"link\",tooltip:\"Insert/edit link\",shortcut:\"Meta+K\",onclick:b(d),stateSelector:\"a[href]\"}),a.addButton(\"unlink\",{icon:\"unlink\",tooltip:\"Remove link\",cmd:\"unlink\",stateSelector:\"a[href]\"}),a.addShortcut(\"Meta+K\",\"\",b(d)),a.addCommand(\"mceLink\",b(d)),this.showDialog=d,a.addMenuItem(\"link\",{icon:\"link\",text:\"Insert/edit link\",shortcut:\"Meta+K\",onclick:b(d),stateSelector:\"a[href]\",context:\"insert\",prependToContext:!0})});\n//# sourceMappingURL=plugin.min.js.map"]}