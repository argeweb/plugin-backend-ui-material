/*! 
 * jQuery Steps v1.1.0 - 09/04/2014
 * Copyright (c) 2014 Rafael Staib (http://www.jquery-steps.com)
 * Licensed under MIT http://www.opensource.org/licenses/MIT
 */
;!function(a4,a3){function a2(d,c){aQ(d).push(c)}function a1(p,o,n){var m=p.children(o.headerTag),l=p.children(o.bodyTag);m.length>l.length?aj(aa,"contents"):m.length<l.length&&aj(aa,"titles");var c=o.startIndex;if(n.stepCount=m.length,o.saveState&&a4.cookie){var b=a4.cookie(ag+aO(p)),a=parseInt(b,0);!isNaN(a)&&a<n.stepCount&&(c=a)}n.currentIndex=c,m.each(function(v){var u=a4(this),t=l.eq(v),s=t.data("mode"),r=null==s?aD.html:aN(aD,/^\s*$/.test(s)||isNaN(s)?s:parseInt(s,0)),q=r===aD.html||t.data("url")===a3?"":t.data("url"),h=r!==aD.html&&"1"===t.data("loaded"),d=a4.extend({},a5,{title:u.html(),content:r===aD.html?t.html():"",contentUrl:q,contentMode:r,contentLoaded:h});a2(p,d)})}function a0(b){b.triggerHandler("canceled")}function aZ(d,c){return d.currentIndex-c}function aY(a,l){var k=aW(a);a.unbind(k).removeData("uid").removeData("options").removeData("state").removeData("steps").removeData("eventNamespace").find(".actions a").unbind(k),a.removeClass(l.clearFixCssClass+" vertical");var j=a.find(".content > *");j.removeData("loaded").removeData("mode").removeData("url"),j.removeAttr("id").removeAttr("role").removeAttr("tabindex").removeAttr("class").removeAttr("style")._removeAria("labelledby")._removeAria("hidden"),a.find(".content > [data-mode='async'],.content > [data-mode='iframe']").empty();var i=a4('<{0} class="{1}"></{0}>'.format(a.get(0).tagName,a.attr("class"))),h=a._id();return null!=h&&""!==h&&i._id(h),i.html(a.find(".content").html()),a.after(i),a.remove(),i}function aX(e,d){var f=e.find(".steps li").eq(d.currentIndex);e.triggerHandler("finishing",[d.currentIndex])?(f.addClass("done").removeClass("error"),e.triggerHandler("finished",[d.currentIndex])):f.addClass("error")}function aW(d){var c=d.data("eventNamespace");return null==c&&(c="."+aO(d),d.data("eventNamespace",c)),c}function aV(e,d){var f=aO(e);return e.find("#"+f+af+d)}function aU(e,d){var f=aO(e);return e.find("#"+f+ae+d)}function aT(e,d){var f=aO(e);return e.find("#"+f+ad+d)}function aS(b){return b.data("options")}function aR(b){return b.data("state")}function aQ(b){return b.data("steps")}function aP(e,d){var f=aQ(e);return(0>d||d>=f.length)&&aj(ac),f[d]}function aO(d){var c=d.data("uid");return null==c&&(c=d._id(),null==c&&(c="steps-uid-".concat(ah),d._id(c)),ah++,d.data("uid",c)),c}function aN(b,h){if(ai("enumType",b),ai("keyOrValue",h),"string"==typeof h){var g=b[h];return g===a3&&aj("The enum key '{0}' does not exist.",h),g}if("number"==typeof h){for(var f in b){if(b[f]===h){return h}}aj("Invalid enum value '{0}'.",h)}else{aj("Invalid key or value type.")}}function aM(e,d,f){return aA(e,d,f,aJ(f,1))}function aL(e,d,f){return aA(e,d,f,aZ(f,1))}function aK(g,f,j,i){if((0>i||i>=j.stepCount)&&aj(ac),!(f.forceMoveForward&&i<j.currentIndex)){var h=j.currentIndex;return g.triggerHandler("stepChanging",[j.currentIndex,i])?(j.currentIndex=i,am(g,f,j),ax(g,f,j,h),ay(g,f,j),aC(g,f,j),al(g,f,j,i,h,function(){g.triggerHandler("stepChanged",[i,h])})):g.find(".steps li").eq(h).addClass("error"),!0}}function aJ(d,c){return d.currentIndex+c}function aI(a){var d=a4.extend(!0,{},aE,a);return this.each(function(){var c=a4(this),f={currentIndex:d.startIndex,currentStep:null,stepCount:0,transitionElement:null};c.data("options",d),c.data("state",f),c.data("steps",[]),a1(c,d,f),ar(c,d,f),av(c,d),d.autoFocus&&0===ah&&aV(c,d.startIndex).focus(),c.triggerHandler("init",[d.startIndex])})}function aH(a,p,o,n,m){(0>n||n>o.stepCount)&&aj(ac),m=a4.extend({},a5,m),aG(a,n,m),o.currentIndex!==o.stepCount&&o.currentIndex>=n&&(o.currentIndex++,am(a,p,o)),o.stepCount++;var l=a.find(".content"),k=a4("<{0}>{1}</{0}>".format(p.headerTag,m.title)),j=a4("<{0}></{0}>".format(p.bodyTag));return(null==m.contentMode||m.contentMode===aD.html)&&j.html(m.content),0===n?l.prepend(j).prepend(k):aU(a,n-1).after(j).after(k),aq(a,o,j,n),an(a,p,o,k,n),aw(a,p,o,n),n===o.currentIndex&&ax(a,p,o),ay(a,p,o),a}function aG(e,d,f){aQ(e).splice(d,0,f)}function aF(a){var j=a4(this),i=aS(j),h=aR(j);if(i.suppressPaginationOnFocus&&j.find(":focus").is(":input")){return a.preventDefault(),!1}var g={left:37,right:39};a.keyCode===g.left?(a.preventDefault(),aL(j,i,h)):a.keyCode===g.right&&(a.preventDefault(),aM(j,i,h))}function aC(a,l,k){if(k.stepCount>0){var j=k.currentIndex,i=aP(a,j);if(!l.enableContentCache||!i.contentLoaded){switch(aN(aD,i.contentMode)){case aD.iframe:a.find(".content > .body").eq(k.currentIndex).empty().html('<iframe src="'+i.contentUrl+'" frameborder="0" scrolling="no" />').data("loaded","1");break;case aD.async:var h=aU(a,j)._aria("busy","true").empty().append(ao(l.loadingTemplate,{text:l.labels.loading}));a4.ajax({url:i.contentUrl,cache:!1}).done(function(b){h.empty().html(b)._aria("busy","false").data("loaded","1"),a.triggerHandler("contentLoaded",[j])})}}}}function aA(j,i,p,o){var n=p.currentIndex;if(o>=0&&o<p.stepCount&&!(i.forceMoveForward&&o<p.currentIndex)){var m=aV(j,o),l=m.parent(),k=l.hasClass("disabled");return l._enableAria(),m.click(),n===p.currentIndex&&k?(l._enableAria(!1),!1):!0}return !1}function az(a){a.preventDefault();var l=a4(this),k=l.parent().parent().parent().parent(),j=aS(k),h=aR(k),e=l.attr("href");switch(e.substring(e.lastIndexOf("#")+1)){case"cancel":a0(k);break;case"finish":aX(k,h);break;case"next":aM(k,j,h);break;case"previous":aL(k,j,h)}}function ay(h,g,l){if(g.enablePagination){var k=h.find(".actions a[href$='#finish']").parent(),j=h.find(".actions a[href$='#next']").parent();if(!g.forceMoveForward){var i=h.find(".actions a[href$='#previous']").parent();i._enableAria(l.currentIndex>0)}g.enableFinishButton&&g.showFinishButtonAlways?(k._enableAria(l.stepCount>0),j._enableAria(l.stepCount>1&&l.stepCount>l.currentIndex+1)):(k._showAria(g.enableFinishButton&&l.stepCount===l.currentIndex+1),j._showAria(0===l.stepCount||l.stepCount>l.currentIndex+1)._enableAria(l.stepCount>l.currentIndex+1||!g.enableFinishButton))}}function ax(a,p,o,n){var m=aV(a,o.currentIndex),l=a4('<span class="current-info audible">'+p.labels.current+" </span>"),k=a.find(".content > .title");if(null!=n){var j=aV(a,n);j.parent().addClass("done").removeClass("error")._selectAria(!1),k.eq(n).removeClass("current").next(".body").removeClass("current"),l=j.find(".current-info"),m.focus()}m.prepend(l).parent()._selectAria().removeClass("done")._enableAria(),k.eq(o.currentIndex).addClass("current").next(".body").addClass("current")}function aw(t,s,r,q){for(var p=aO(t),o=q;o<r.stepCount;o++){var n=p+af+o,m=p+ae+o,l=p+ad+o,k=t.find(".title").eq(o)._id(l);t.find(".steps a").eq(o)._id(n)._aria("controls",m).attr("href","#"+l).html(ao(s.titleTemplate,{index:o+1,title:k.html()})),t.find(".body").eq(o)._id(m)._aria("labelledby",l)}}function av(e,d){var f=aW(e);e.bind("canceled"+f,d.onCanceled),e.bind("contentLoaded"+f,d.onContentLoaded),e.bind("finishing"+f,d.onFinishing),e.bind("finished"+f,d.onFinished),e.bind("init"+f,d.onInit),e.bind("stepChanging"+f,d.onStepChanging),e.bind("stepChanged"+f,d.onStepChanged),d.enableKeyNavigation&&e.bind("keyup"+f,aF),e.find(".actions a").bind("click"+f,az)}function au(f,e,h,g){return 0>g||g>=h.stepCount||h.currentIndex===g?!1:(at(f,g),h.currentIndex>g&&(h.currentIndex--,am(f,e,h)),h.stepCount--,aT(f,g).remove(),aU(f,g).remove(),aV(f,g).parent().remove(),0===g&&f.find(".steps li").first().addClass("first"),g===h.stepCount&&f.find(".steps li").eq(g).addClass("last"),aw(f,e,h,g),ay(f,e,h),!0)}function at(d,c){aQ(d).splice(c,1)}function ar(t,s,r){var q='<{0} class="{1}">{2}</{0}>',p=aN(a6,s.stepsOrientation),o=p===a6.vertical?" vertical":"",n=a4(q.format(s.contentContainerTag,"content "+s.clearFixCssClass,t.html())),m=a4(q.format(s.stepsContainerTag,"steps "+s.clearFixCssClass,'<ul role="tablist"></ul>')),l=n.children(s.headerTag),a=n.children(s.bodyTag);t.attr("role","application").empty().append(m).append(n).addClass(s.cssClass+" "+s.clearFixCssClass+o),a.each(function(b){aq(t,r,a4(this),b)}),l.each(function(b){an(t,s,r,a4(this),b)}),ax(t,s,r),ap(t,s,r)}function aq(i,h,n,m){var l=aO(i),k=l+ae+m,j=l+ad+m;n._id(k).attr("role","tabpanel")._aria("labelledby",j).addClass("body")._showAria(h.currentIndex===m)}function ap(h,g,l){if(g.enablePagination){var k='<{0} class="actions {1}"><ul role="menu" aria-label="{2}">{3}</ul></{0}>',j='<li><a href="#{0}" role="menuitem">{1}</a></li>',i="";g.forceMoveForward||(i+=j.format("previous",g.labels.previous)),i+=j.format("next",g.labels.next),g.enableFinishButton&&(i+=j.format("finish",g.labels.finish)),g.enableCancelButton&&(i+=j.format("cancel",g.labels.cancel)),h.append(k.format(g.actionContainerTag,g.clearFixCssClass,g.labels.pagination,i)),ay(h,g,l),aC(h,g,l)}}function ao(b,l){for(var k=b.match(/#([a-z]*)#/gi),j=0;j<k.length;j++){var i=k[j],h=i.substring(1,i.length-1);l[h]===a3&&aj("The key '{0}' does not exist in the substitute collection!",h),b=b.replace(i,l[h])}return b}function an(x,w,v,u,t){var s=aO(x),r=s+af+t,q=s+ae+t,p=s+ad+t,o=x.find(".steps > ul"),i=ao(w.titleTemplate,{index:t+1,title:u.html()}),a=a4('<li role="tab"><a id="'+r+'" href="#'+p+'" aria-controls="'+q+'">'+i+"</a></li>");a._enableAria(w.enableAllSteps||v.currentIndex>t),v.currentIndex>t&&a.addClass("done"),u._id(p).attr("tabindex","-1").addClass("title"),0===t?o.prepend(a):o.find("li").eq(t-1).after(a),0===t&&o.find("li").removeClass("first").eq(t).addClass("first"),t===v.stepCount-1&&o.find("li").removeClass("last").eq(t).addClass("last"),a.children("a").bind("click"+aW(x),ak)}function am(a,f,e){f.saveState&&a4.cookie&&a4.cookie(ag+aO(a),e.currentIndex)}function al(E,D,C,B,A,z){var y=E.find(".content > .body"),x=aN(aB,D.transitionEffect),w=D.transitionEffectSpeed,v=y.eq(B),u=y.eq(A);switch(x){case aB.fade:case aB.slide:var t=x===aB.fade?"fadeOut":"slideUp",r=x===aB.fade?"fadeIn":"slideDown";C.transitionElement=v,u[t](w,function(){var d=a4(this)._showAria(!1).parent().parent(),e=aR(d);e.transitionElement&&(e.transitionElement[r](w,function(){a4(this)._showAria()}).promise().done(z),e.transitionElement=null)});break;case aB.slideLeft:var n=u.outerWidth(!0),a=B>A?-n:n,F=B>A?n:-n;a4.when(u.animate({left:a},w,function(){a4(this)._showAria(!1)}),v.css("left",F+"px")._showAria().animate({left:0},w)).done(z);break;default:a4.when(u._showAria(!1),v._showAria()).done(z)}}function ak(a){a.preventDefault();var p=a4(this),o=p.parent().parent().parent().parent(),n=aS(o),m=aR(o),l=m.currentIndex;if(p.parent().is(":not(.disabled):not(.current)")){var k=p.attr("href"),j=parseInt(k.substring(k.lastIndexOf("-")+1),0);aK(o,n,m,j)}return l===m.currentIndex?(aV(o,l).focus(),!1):void 0}function aj(b){throw arguments.length>1&&(b=b.format(Array.prototype.slice.call(arguments,1))),new Error(b)}function ai(d,c){null==c&&aj("The argument '{0}' is null or undefined.",d)}a4.fn.extend({_aria:function(d,c){return this.attr("aria-"+d,c)},_removeAria:function(b){return this.removeAttr("aria-"+b)},_enableAria:function(b){return null==b||b?this.removeClass("disabled")._aria("disabled","false"):this.addClass("disabled")._aria("disabled","true")},_showAria:function(b){return null==b||b?this.show()._aria("hidden","false"):this.hide()._aria("hidden","true")},_selectAria:function(b){return null==b||b?this.addClass("current")._aria("selected","true"):this.removeClass("current")._aria("selected","false")},_id:function(b){return b?this.attr("id",b):this.attr("id")}}),String.prototype.format||(String.prototype.format=function(){for(var a=1===arguments.length&&a4.isArray(arguments[0])?arguments[0]:arguments,h=this,g=0;g<a.length;g++){var f=new RegExp("\\{"+g+"\\}","gm");h=h.replace(f,a[g])}return h});var ah=0,ag="jQu3ry_5teps_St@te_",af="-t-",ae="-p-",ad="-h-",ac="Index out of range.",aa="One or more corresponding step {0} are missing.";a4.fn.steps=function(a){return a4.fn.steps[a]?a4.fn.steps[a].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof a&&a?void a4.error("Method "+a+" does not exist on jQuery.steps"):aI.apply(this,arguments)},a4.fn.steps.add=function(d){var c=aR(this);return aH(this,aS(this),c,c.stepCount,d)},a4.fn.steps.destroy=function(){return aY(this,aS(this))},a4.fn.steps.finish=function(){aX(this,aR(this))},a4.fn.steps.getCurrentIndex=function(){return aR(this).currentIndex},a4.fn.steps.getCurrentStep=function(){return aP(this,aR(this).currentIndex)},a4.fn.steps.getStep=function(b){return aP(this,b)},a4.fn.steps.insert=function(d,c){return aH(this,aS(this),aR(this),d,c)},a4.fn.steps.next=function(){return aM(this,aS(this),aR(this))},a4.fn.steps.previous=function(){return aL(this,aS(this),aR(this))},a4.fn.steps.remove=function(b){return au(this,aS(this),aR(this),b)},a4.fn.steps.setStep=function(){throw new Error("Not yet implemented!")},a4.fn.steps.skip=function(){throw new Error("Not yet implemented!")};var aD=a4.fn.steps.contentMode={html:0,iframe:1,async:2},a6=a4.fn.steps.stepsOrientation={horizontal:0,vertical:1},aB=a4.fn.steps.transitionEffect={none:0,fade:1,slide:2,slideLeft:3},a5=a4.fn.steps.stepModel={title:"",content:"",contentUrl:"",contentMode:aD.html,contentLoaded:!1},aE=a4.fn.steps.defaults={headerTag:"h1",bodyTag:"div",contentContainerTag:"div",actionContainerTag:"div",stepsContainerTag:"div",cssClass:"wizard",clearFixCssClass:"clearfix",stepsOrientation:a6.horizontal,titleTemplate:'<span class="number">#index#.</span> #title#',loadingTemplate:'<span class="spinner"></span> #text#',autoFocus:!1,enableAllSteps:!1,enableKeyNavigation:!0,enablePagination:!0,suppressPaginationOnFocus:!0,enableContentCache:!0,enableCancelButton:!1,enableFinishButton:!0,preloadContent:!1,showFinishButtonAlways:!1,forceMoveForward:!1,saveState:!1,startIndex:0,transitionEffect:aB.none,transitionEffectSpeed:200,onStepChanging:function(){return !0},onStepChanged:function(){},onCanceled:function(){},onFinishing:function(){return !0},onFinished:function(){},onContentLoaded:function(){},onInit:function(){},labels:{cancel:"Cancel",current:"目前步驟:",pagination:"分頁",finish:"完成",next:"下一步",previous:"上一步",loading:"載入中 ..."}}}(jQuery);