{"version":3,"sources":["page.js"],"names":["json","url","data","successCallback","errorCallback","$","ajax","type","dataType","cache","async","success","a","error","b","c","d","show_message","responseJSON","json_async","ajax_post","responseText","xhr","ajaxOptions","thrownError","window","alert","message","getRandID","undefined","i","charAt","Math","floor","random","length","msg","timeout","backend","quick_show","parent_is_ready","start_filepicker","uploader","pickup","is_aside","name","is_content","reload","aside_iframe","content_iframe","change_lang","index","eq","click","create_editor","id","ed","tinyMCE","createEditor","theme","content_css","height","plugins","toolbar","statusbar","menubar","setup","addButton","title","image","onclick","execCommand","toggle","on","e","convert_urls","relative_urls","remove_script_host","render","showTimeout","callback","hideHeader","showLoading","after_hide_html","stop","animate","top","addClass","html","class_name","removeClass","changeView","view","last","current","page","changeViewAndReload","first","save_form","is_saving","clearTimeout","timeout_lock_saving","setTimeout","$form","find","each","this","attr","get","val","getContent","change","submit","save_and_exit","save_with_exit","scrollDiv","removeMask","setBodyClass","pageInit","new_html","console","log","nav_var_top","page_header_top","scrollDiv_top","text","trim","hide","closeUi","margin-top","hover","mouseover","mouseleave","css","scroll","affix","scrollTop","remove","checkNavItemAndShow","load","j","JSON","parse","contents","err","key","parents","indexOf","add","edit","profile","config","snackbar","ui","setUserInformation","editors","prev","makeSortTable","makeListOp","bootstrapTable","fadeIn","linkClickProcess","_url","preventDefault","hasClass","lang","show","stopPropagation","swal","showCancelButton","confirmButtonColor","confirmButtonText","cancelButtonText","showLoaderOnConfirm","closeOnConfirm","location","eval","stringify","code","i_text","t","replace","pathname","sortable","placeholder","handle","opacity","cursor","axis","update","last_page_record","$sort","field_name","field_val","is_checked","append","parent","is","dom_is_ready","js_is_ready","pageDOD","visual_timer","onDragStart","evt","onDragEnd","removeVisualClass","onDragOver","onDrop","files","dataTransfer","insert","target","randId","addFile","setEditorValue","setTargetValue","response","item_key","item","__key__","target_id","selection","setContent","init","document","closeSearchBox","closeMessageBox","outerHTML","url_target","then","split","enable_text","info","disable_text","filter","event","tagName","srcElement","setScope","test","shortcut","keys","handler","catchEvent","scope","onbeforeunload","unbind"],"mappings":"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","file":"page.min.js","sourcesContent":["function json(url,data,successCallback,errorCallback) {$.ajax({url:url,type:\"POST\",dataType:\"json\",cache: false,data:data,async:!1,success:function(a){successCallback(a)},error:function(b,c,d){void 0==errorCallback?show_message(b.responseJSON.error):errorCallback(b.responseJSON)}})};\r\nfunction json_async(url,data,successCallback,errorCallback) {$.ajax({url:url,type:\"POST\",dataType:\"json\",cache: false,data:data,async:1 ,success:function(a){successCallback(a)},error:function(b,c,d){void 0==errorCallback?show_message(b.responseJSON.error):errorCallback(b.responseJSON)}})};\r\nfunction ajax_post(url,data,successCallback,errorCallback) {$.ajax({url:url,type:\"POST\",cache: true,data:data,async:true,success:function(responseText){successCallback(responseText)},error:function(xhr,ajaxOptions,thrownError){if(errorCallback){errorCallback(xhr.responseText)}else{window.alert(thrownError.message)}}})};\r\nfunction getRandID(a){if(a==undefined){a=\"rand-id-\"}var b=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\";for(var i=0;i<5;i++)a+=b.charAt(Math.floor(Math.random()*b.length));return a};\r\nvar save_with_exit = false;\r\nvar dom_is_ready = false;\r\nvar is_saving = false;\r\nvar timeout_lock_saving = null;\r\nvar backend = parent;\r\nvar page = {};\r\n\r\nfunction show_message(msg, timeout){\r\n    backend.message.quick_show(msg, timeout);\r\n}\r\n// 確保 file picker 與 message 被正常載入\r\nvar start_filepicker = backend.uploader.pickup;\r\nfunction parent_is_ready(){\r\n    //  此文件在 parent 準備好之前就載入完畢\r\n    show_message = backend.message.quick_show;\r\n    start_filepicker = backend.uploader.pickup;\r\n}\r\nif (backend.js_is_ready && backend.js_is_ready == true){\r\n    //  此文件在 parent 準備好之後才載入完畢\r\n    show_message = backend.message.quick_show;\r\n    start_filepicker = backend.uploader.pickup;\r\n}\r\n\r\nvar pageDOD = {\r\n    \"visual_timer\": 3,\r\n    \"onDragStart\": function(evt){\r\n        evt.preventDefault();\r\n        evt.stopPropagation();\r\n        $(\"html\").addClass(\"dropping\");\r\n        if ($(\".file_picker_div, .imgs_selector_div, .field-type-rich-text-field\").length == 0){\r\n            $(\"#dropping\").addClass(\"no_target\");\r\n        }else{\r\n            $(\"#dropping\").removeClass(\"no_target\");\r\n            $(\".file_picker_div, .imgs_selector_div\").parent().parent().addClass(\"dropping-box\");\r\n        }\r\n    },\r\n    \"onDragEnd\": function (evt){\r\n        evt.preventDefault();\r\n        evt.stopPropagation();\r\n        pageDOD.visual_timer=0;\r\n        setTimeout(pageDOD.removeVisualClass, 1000);\r\n    },\r\n    \"onDragOver\": function (evt){\r\n        evt.preventDefault();\r\n        evt.stopPropagation();\r\n        pageDOD.visual_timer=3;\r\n        $(\"html\").addClass(\"dropping\");\r\n        $(\".file_picker_div, .imgs_selector_div\").parent().parent().addClass(\"dropping-box\");\r\n    },\r\n    \"removeVisualClass\": function (){\r\n        if (pageDOD.visual_timer==0){\r\n            $(\"html\").removeClass(\"dropping\");\r\n            $(\".file_picker_div, .imgs_selector_div\").parent().parent().removeClass(\"dropping-box\");\r\n            pageDOD.visual_timer = 0;\r\n        }else{\r\n            pageDOD.visual_timer--;\r\n            setTimeout(pageDOD.removeVisualClass, 1000);\r\n        }\r\n    },\r\n    \"onDrop\": function (evt){\r\n        var files = evt.dataTransfer.files;\r\n        evt.preventDefault();\r\n        pageDOD.visual_timer=0;\r\n        $(\"html\").removeClass(\"dropping\");\r\n        $(\".file_picker_div, .imgs_selector_div\").parent().parent().removeClass(\"dropping-box\");\r\n        if (files.length > 10){\r\n            backend.message.insert(\"danger\", \"錯誤\", \"一次可上傳 10個文件\", undefined);\r\n            return;\r\n        }\r\n        for (var i=0; i<files.length; i++) {\r\n            var t = evt.target;\r\n            console.log(t);\r\n            var randId = getRandID(\"upload-\");\r\n            if ($(t).hasClass(\"form-group\")){\r\n                $(t).attr(\"data-uploadId\", randId);\r\n            }else{\r\n                $(t).parents(\".form-group\").attr(\"data-uploadId\", randId);\r\n            }\r\n            if ($(t).hasClass(\"mce-content-body\") || $(t).parents(\"body\").hasClass('mce-content-body ')){\r\n                randId = $(t).parents(\"body\").data(\"id\") || $(t).data(\"id\");\r\n                backend.uploader.addFile(files[i], randId, pageDOD.setEditorValue);\r\n            }else{\r\n                backend.uploader.addFile(files[i], randId, pageDOD.setTargetValue);\r\n            }\r\n        }\r\n    },\r\n    \"setTargetValue\": function (data){\r\n        var url = data.response.url;\r\n        var item_key = data.response.item.__key__;\r\n        var target_id = data.target_id;\r\n        var t = $(\"*[data-uploadId='\" + data.target_id + \"']\");\r\n        t.find(\"input\").first().val(data.response.url).data(\"key\", item_key).show();\r\n        if (url == \"\"){\r\n            t.find(\".file_picker_item\").css(\"background-image\", \"none\").addClass(\"file_picker_item_none\");\r\n        }else{\r\n            t.find(\".file_picker_item\").css(\"background-image\", \"url(\" + url + \")\").removeClass(\"file_picker_item_none\");\r\n            t.find(\"input\").first().change();\r\n        }\r\n    },\r\n    \"setEditorValue\": function (data){\r\n        var url = data.response.url;\r\n        var target_id = data.target_id;\r\n        if (tinyMCE.get(target_id)){\r\n            tinyMCE.get(target_id).selection.setContent('<img src=\"' + url + '\" />');\r\n        }\r\n    }\r\n};\r\nfunction is_aside(){\r\n    return (window.name == \"aside_iframe\");\r\n}\r\nfunction is_content(){\r\n    return (window.name == \"content_iframe\");\r\n}\r\nfunction reload(){\r\n    if (is_aside()) {\r\n        backend.aside_iframe.reload();\r\n    }else{\r\n        backend.content_iframe.reload();\r\n    }\r\n}\r\nfunction change_lang(index){\r\n    $(\"a.btn-lang\").eq(index).click();\r\n}\r\nfunction create_editor(id){\r\n    var ed = tinyMCE.createEditor(id, {\r\n    theme : 'modern',\r\n    content_css : [\"/plugins/backend_ui_material/static/plugins/TinyMCE/4.2.5/skins/lightgray/content.min.css\"],\r\n    height: 400,\r\n    plugins: [\r\n    \"link image media code table preview hr anchor pagebreak textcolor fullscreen colorpicker \"\r\n    ],\r\n    toolbar: \"undo redo | styleselect | alignleft aligncenter alignright forecolor backcolor bold italic | link upload_image image media | code custom_fullscreen\",\r\n    statusbar: false,\r\n    menubar: false,\r\n    setup : function(ed) {\r\n        ed.addButton('upload_image', {\r\n            title : '插入圖片',\r\n            image : '/plugins/backend_ui_material/static/plugins/TinyMCE/4.2.5/themes/upload_image.png',\r\n            onclick : function() {\r\n                start_filepicker(ed, true)\r\n            }\r\n        });\r\n\r\n        ed.addButton('custom_fullscreen', {\r\n            title: '擴大編輯區',\r\n            image : '/plugins/backend_ui_material/static/plugins/TinyMCE/4.2.5/themes/fullscreen.png',\r\n            onclick : function() {\r\n                ed.execCommand('mceFullScreen');\r\n                $(\".page-header\").toggle();\r\n            }\r\n        });\r\n        ed.on('init', function (e) {\r\n        });\r\n    },\r\n    convert_urls:false,\r\n    relative_urls:false,\r\n    remove_script_host:false\r\n    });\r\n    ed.render();\r\n}\r\nfunction showTimeout(callback){\r\n    hideHeader('<div style=\"margin: 100px auto; width: 40%; font-size: 18px;\">連線逾時</div>', callback);\r\n}\r\nfunction showLoading(callback){\r\n    hideHeader('<div id=\"onLoad\">' +\r\n        '<div class=\"sk-spinner sk-spinner-chasing-dots\">' +\r\n        '<div class=\"sk-dot1\"></div>' +\r\n        '<div class=\"sk-dot2\"></div>' +\r\n        '</div>' +\r\n        '</div>', callback)\r\n}\r\nfunction hideHeader(after_hide_html, callback){\r\n    $('.page-header').stop().animate({\r\n        top: -70\r\n    });\r\n    if ($('header').length == 0 && typeof callback === \"function\"){\r\n        callback();\r\n    }else{\r\n        $('header').stop().animate({\r\n            top: -70\r\n        }, 250, function(){\r\n            $('body').addClass(\"body-hide\").html(after_hide_html);\r\n            if (typeof callback === \"function\") callback();\r\n        });\r\n    }\r\n}\r\nfunction addClass(class_name){\r\n    $(\"body\").addClass(class_name);\r\n}\r\nfunction removeClass(class_name){\r\n    $(\"body\").removeClass(class_name);\r\n}\r\nfunction changeView(){\r\n    $(\"body\").removeClass(\"in-\"+backend.view.last+\"-mode\").addClass(\"in-\"+backend.view.current+\"-mode\");\r\n    if (typeof page[\"change_view_to_\"+backend.view.current] == \"function\"){\r\n        page[\"change_view_to_\"+backend.view.current]();\r\n    }\r\n}\r\nfunction changeViewAndReload(){\r\n    if (backend.view.last != backend.view.current){\r\n        if (backend.view.current == \"edit\" || backend.view.current == \"view\"){\r\n            $(\"a.\"+backend.view.current+\"-url\").first().click();\r\n        }\r\n    }\r\n}\r\nfunction save_form(){\r\n    if ($(\"form\").length <=0){ return false;}\r\n    if (is_saving == true){ return false;}\r\n    is_saving = true;\r\n    clearTimeout(timeout_lock_saving);\r\n    timeout_lock_saving = setTimeout(function(){ is_saving = false; }, 5000);\r\n    var $form = $(\"form\");\r\n    $form.find(\".field-type-rich-text-field\").each(function(){\r\n        var id = $(this).attr(\"id\");\r\n        if (tinyMCE.get(id)){\r\n            $(this).val(tinyMCE.get(id).getContent());\r\n        }\r\n        $(this).change();\r\n    });\r\n    $form.submit();\r\n}\r\nfunction save_and_exit(){\r\n    save_with_exit = true;\r\n    save_form();\r\n}\r\nfunction scrollDiv(){\r\n    $(\".scrollDiv\").addClass(\"on\");\r\n    backend.content_iframe.removeMask();\r\n}\r\n//  僅執行一次\r\n$(function(){\r\n    if (window.name != \"\"){\r\n        pageInit();\r\n    }\r\n    linkClickProcess();\r\n    if (is_aside()) {\r\n        backend.aside_iframe.init(\"#aside_iframe\");\r\n        backend.aside_iframe.page = page;\r\n    }else{\r\n        backend.content_iframe.init(\"#content_iframe\");\r\n        backend.content_iframe.page = page;\r\n    }\r\n\r\n    $(document).on('click', function(e){\r\n        backend.ui.closeSearchBox();\r\n        backend.ui.closeMessageBox();\r\n    }).on(\"click\", \".record_item td\", function(e){\r\n        if (e.target.outerHTML.indexOf('switch-toggle') > 0 || e.target.outerHTML.indexOf('input') > 0){\r\n            return;\r\n        }\r\n        var url_target = backend.view.current + \"-url\";\r\n        var url = $(this).parent().data(url_target);\r\n        if ($(this).hasClass(\"record_item\")){\r\n            url = $(this).data(url_target);\r\n        }\r\n        if (url && url != \"\"){\r\n            if (backend.view.current != \"delete\"){\r\n                if ($(this).parent().data(backend.view.current + \"-iframe\") == 'aside')\r\n                    backend.aside_iframe.load(url);\r\n                else\r\n                    backend.content_iframe.load(url);\r\n            }else{\r\n                backend.swal({\r\n                    title: \"您確定要刪除此記錄嗎\",\r\n                    text: \"删除後后将無法恢複，請谨慎操作！\",\r\n                    type: \"warning\",\r\n                    showCancelButton: true,\r\n                    confirmButtonColor: \"#DD6B55\",\r\n                    confirmButtonText: \"删除\",\r\n                    cancelButtonText: \"取消\",\r\n                    showLoaderOnConfirm: true\r\n                }).then(function(){\r\n                    json(url, null, function (data) {\r\n                        backend.swal(\"删除成功！\", \"您已经永久删除了此記錄。\", \"success\");\r\n                        backend.content_iframe.reload();\r\n                    }, function (data) {\r\n                        backend.swal(\"删除失敗！\", \"刪除記錄時發生問題。\", \"error\");\r\n                    })\r\n                });\r\n            }\r\n        }\r\n    }).on(\"change\", \".file_picker_div input\", function(){\r\n        var val = $(this).val();\r\n        if ($(this).parents(\".form-group\").hasClass(\"form-group-avatar\")){\r\n            $(this).parents(\".form-group\").find(\".file_picker_item\").css(\"background-image\", \"url(\" + val + \")\").text(\"\");\r\n        }else{\r\n            $(this).parents(\".form-group\").find(\".file_picker_item\").attr(\"data-ext\", val.split(\".\")[1]).text(val.split(\".\")[1]);\r\n        }\r\n        if ($(this).attr(\"id\") == \"avatar\"){\r\n            backend.ui.setUserInformation($(\"#name\").val(), val);\r\n        }\r\n    }).on(\"change\", \".record_item td .btn-checkbox-json\", function(){\r\n        if ($(this).is(\":checked\")){\r\n            var enable_text = $(this).data(\"enable-text\");\r\n            json($(this).data(\"enable-url\"), null, function(data){\r\n                if (data.info == \"success\"){\r\n                    backend.message.snackbar(enable_text+\"...\");\r\n                }\r\n            });\r\n        }else{\r\n            var disable_text = $(this).data(\"disable-text\");\r\n            json($(this).data(\"disable-url\"), null, function(data){\r\n                if (data.info == \"success\"){\r\n                    backend.message.snackbar(disable_text+\"...\");\r\n                }\r\n            });\r\n        }\r\n    });\r\n\r\n    key.filter = function(event){\r\n        var tagName = (event.target || event.srcElement).tagName;\r\n        key.setScope(/^(INPUT|TEXTAREA|SELECT)$/.test(tagName) ? 'input' : 'doc');\r\n        return true;\r\n    };\r\n    key(backend.shortcut.keys, 'doc', function(event, handler){ return backend.shortcut.catchEvent(window.name, handler.shortcut, handler.scope); });\r\n    key(backend.shortcut.keys, 'input', function(event, handler){ return backend.shortcut.catchEvent(window.name, handler.shortcut, handler.scope); });\r\n    window.onbeforeunload = function(){\r\n        $(document).unbind();    //remove listeners on document\r\n        $(document).find('*').unbind(); //remove listeners on all nodes\r\n        //clean up cookies\r\n        //remove items from localStorage\r\n    };\r\n});\r\nfunction setBodyClass(class_name){\r\n    $(\"body\").addClass(class_name);\r\n}\r\n//  ajax 載入時，需再執行一次\r\nfunction pageInit(new_html) {\r\n    page = {};\r\n    if (new_html){\r\n        try{\r\n            $(\"body\").html(new_html);\r\n        }catch(e){\r\n            console.log(e);\r\n        }\r\n    }\r\n    var nav_var_top = -70;\r\n    var page_header_top = 0;\r\n    var scrollDiv_top = 0;\r\n    if (is_aside()){\r\n        nav_var_top = 0;\r\n        page_header_top = 56;\r\n        scrollDiv_top = 56;\r\n        $(\"body\").addClass(\"aside\");\r\n    }else{\r\n        //backend.content_iframe.setPageTitle($(\".page-header h3\").text());\r\n    }\r\n    $(\".page-header\").stop().animate({\r\n        top: nav_var_top\r\n    }, 300);\r\n    if($(\"header\").text().trim() != \"\"){\r\n        scrollDiv_top += 0;\r\n        $(\"body\").addClass(\"has-header\");\r\n        $(\"header\").stop().animate({\r\n            top: page_header_top\r\n        }, 300);\r\n    }else{\r\n        $(\"body\").addClass(\"no-header\");\r\n        if (is_content()){\r\n            $(\"header\").hide();\r\n        }\r\n    }\r\n    $(\".aside-close\").click(function(){\r\n        backend.aside_iframe.closeUi();\r\n    });\r\n\r\n    if (is_content()){\r\n        scrollDiv_top = 0;\r\n    }\r\n    $(\".scrollDiv\").stop().animate({\r\n        \"margin-top\": scrollDiv_top,\r\n    }, 300).hover(function(){\r\n        scrollDiv();\r\n    }, function(){\r\n        $(this).removeClass(\"on\");\r\n    }).mouseover(function(){\r\n        scrollDiv();\r\n    }).mouseleave(function() {\r\n        $(this).removeClass(\"on\");\r\n    }).css({\r\n        \"height\": \"calc(100% - \" + scrollDiv_top +\"px)\"\r\n    }).scroll(function() {\r\n        if (is_content()){\r\n            backend.affix($(this).scrollTop());\r\n        }\r\n    });\r\n    //TODO if input has val addClass control-highlight\r\n    if (window == top) {\r\n        return;\r\n    }\r\n    //backend.content_iframe.afterOnLoad(location.pathname);\r\n    $(\"#onLoad\").remove();\r\n    $('body').removeClass(\"body-hide\");\r\n    checkNavItemAndShow();\r\n    try{\r\n        $(\"iframe[name='iframeForm']\").load(function(){\r\n            var j = JSON.parse($(this).contents().find(\"body\").text());\r\n            $(\".form-group\").removeClass(\"has-error has-danger\").find(\".help-block\").text(\"\");\r\n            var err = j[\"errors\"];\r\n            if (err){\r\n                for (var key in err) {\r\n                    $(\"form #\" + key).parents(\".form-group\").addClass(\"has-error has-danger\").find(\".help-block\").text(err[key]);\r\n                }\r\n                if ($(\"form\").attr(\"action\").indexOf(\"/_ah/upload/\") >= 0){\r\n                    $(\"form\").attr(\"action\", j[\"new_form_action\"]);\r\n                }\r\n            }\r\n            var msg = {\r\n                \"add\": \"記錄已新增\",\r\n                \"edit\": \"記錄已儲存\",\r\n                \"profile\": \"資料已更新\",\r\n                \"data\": \"資料已更新\",\r\n                \"config\": \"設定已變更\",\r\n                \"undefined\": \"未定義的訊息\"\r\n            };\r\n            var text = msg[j[\"response_method\"]];\r\n            if (typeof text === \"undefined\"){\r\n                text = msg[\"undefined\"];\r\n            }\r\n            if (j[\"response_result\"] == \"success\"){\r\n                if (save_with_exit){\r\n                    save_with_exit = false;\r\n                    setTimeout(backend.aside_iframe.closeUi(), 10);\r\n                    backend.message.snackbar(text);\r\n                }else{\r\n                    show_message(text, 1800);\r\n                }\r\n                backend.ui.setUserInformation($(\"#name\").val(), $(\"#avatar\").val());\r\n                if (j[\"response_method\"] == \"add\" || j[\"response_method\"] == \"edit\"){\r\n                    backend.content_iframe.reload(true);\r\n                }\r\n            }else{\r\n                backend.message.snackbar(\"表單欄位有誤\");\r\n            }\r\n            clearTimeout(timeout_lock_saving);\r\n            timeout_lock_saving = setTimeout(function(){\r\n                is_saving = false;\r\n            }, 3000);\r\n        });\r\n        $(\".submit_and_exit\").click(function(){\r\n            save_with_exit = true;\r\n            save_form();\r\n        });\r\n    }catch(e){\r\n    }\r\n    $(\".filepicker\").click(function(){\r\n        start_filepicker($(this).parents(\".input-group\").find(\"input\"), false);\r\n    });\r\n\r\n    tinyMCE.editors=[];\r\n    $(\".field-type-rich-text-field\").each(function() {\r\n        var label_name = $(this).prev().text();\r\n        $(this).prev().remove();\r\n        var id = $(this).attr(\"id\");\r\n        if (id == undefined){ id = $(this).attr(\"name\"); $(this).attr(\"id\", id); }\r\n        if (id) {\r\n            create_editor(id);\r\n        }\r\n    });\r\n\r\n    $('#list-table').on('post-body.bs.table', function () {\r\n        makeSortTable();\r\n        makeListOp();\r\n        checkNavItemAndShow();\r\n        $(\".sortable-list\").removeClass(\"hidden\");\r\n        $(\".fixed-table-loading\").hide();\r\n    }).bootstrapTable();\r\n\r\n    setTimeout(function(){\r\n        $(\".fbtn-container\").fadeIn();\r\n    }, 800);\r\n}\r\n// 處理頁面上的選單區塊\r\nfunction checkNavItemAndShow(){\r\n    // 預設為第一種語系欄位\r\n    $(\"a.btn-lang\").first().click();\r\n    // 沒有 相關操作 項目的話，隱藏\r\n    $(\".list-operations\").each(function(){\r\n        if ($(this).find(\"li\").length > 0){\r\n            $(this).removeClass(\"hide\");\r\n        }else{\r\n            $(this).addClass(\"hide\");\r\n        }\r\n    });\r\n    // 沒有項目的話，整個隱藏\r\n    if ($(\".nav-box li\").length > 0){\r\n        $(\".nav-box\").removeClass(\"hide\").addClass(\"animated\").addClass(\"fadeInUp\");\r\n    }\r\n}\r\n// 處理超連結按下時的動作\r\nfunction linkClickProcess(){\r\n    $(\"body\").on(\"click\", \"a\", function (e) {\r\n        var _url = $(this).attr(\"href\");\r\n        if (_url === undefined){\r\n            e.preventDefault();\r\n            return;\r\n        }\r\n        // 切換語系\r\n        if ($(this).hasClass(\"btn-lang\")) {\r\n            e.preventDefault();\r\n            var lang = $(this).data(\"lang\");\r\n            $(\"div.lang\").hide();\r\n            $(\"div.lang.lang-\" + lang).show();\r\n            return;\r\n        }\r\n        // 刪除項目\r\n        if ($(this).hasClass(\"btn-json-delete\")) {\r\n            e.preventDefault();\r\n            e.stopPropagation();\r\n            backend.swal({\r\n                title: \"您確定要刪除此記錄嗎\",\r\n                text: \"删除後后将無法恢複，請谨慎操作！\",\r\n                type: \"warning\",\r\n                showCancelButton: true,\r\n                confirmButtonColor: \"#DD6B55\",\r\n                confirmButtonText: \"删除\",\r\n                cancelButtonText: \"取消\",\r\n                showLoaderOnConfirm: true,\r\n                closeOnConfirm: false\r\n            }, function () {\r\n                json(_url, null, function (data) {\r\n                    swal(\"删除成功！\", \"您已经永久删除了此記錄。\", \"success\");\r\n                    location.reload();\r\n                }, function (data) {\r\n                    swal(\"删除失敗！\", \"刪除記錄時發生問題。\", \"error\");\r\n                })\r\n            });\r\n            return;\r\n        }\r\n        if ($(this).hasClass(\"gallery-item\")) {\r\n            e.preventDefault();\r\n            return;\r\n        }\r\n        // Json 操作\r\n        if ($(this).hasClass(\"btn-json\")) {\r\n            e.preventDefault();\r\n            var callback = $(this).data(\"callback\");\r\n            json(_url, null, function (data) {\r\n                if (callback !== undefined && callback !== \"undefined\"){\r\n                    eval(callback + '(' + JSON.stringify(data) + ')' );\r\n                }else{\r\n                    if (is_content()) {\r\n                        backend.content_iframe.reload();\r\n                    }\r\n                }\r\n            }, function(data){\r\n                if (data.code == \"404\"){\r\n                    show_message(\"找不到目標頁面\");\r\n                }else{\r\n                    show_message(data.error);\r\n                }\r\n            });\r\n            return;\r\n        }\r\n        // js 語法\r\n        if (_url.indexOf(\"javascript:\") <0 && _url.indexOf(\"#\") <0 ){\r\n            var i_text = $(this).find(\".icon\").text() ? ($(this).find(\".icon\").length>0) : \"\";\r\n            var t = $(this).text().replace(i_text, \"\").trim();\r\n            if ($(this).attr(\"target\") == \"aside_iframe\"){\r\n                backend.aside_iframe.load($(this).attr(\"href\"));\r\n            }else{\r\n                backend.content_iframe.load($(this).attr(\"href\"), t, location.pathname);\r\n            }\r\n            e.preventDefault();\r\n            e.stopPropagation();\r\n        }\r\n    });\r\n}\r\n// 可以排序的表格\r\nfunction makeSortTable(){\r\n    //try{\r\n        $(\".sortable-list tbody\").sortable({\r\n            placeholder: \"ui-state-highlight\",\r\n            handle: 'td.move-headline',\r\n            opacity: 0.8,\r\n            //拖曳時透明\r\n            cursor: 'move',\r\n            //游標設定\r\n            axis:'y',\r\n            //只能垂直拖曳\r\n            update : function () {\r\n                var last_page_record = \"\";\r\n                var $sort = $('.sortable-list tbody');\r\n                $sort.find(\"tr\").each(function() {\r\n                    if ($(this).data(\"id\") != undefined) {\r\n                        last_page_record += \"rec[]=\" + $(this).data(\"id\") + \"&\";\r\n                    }\r\n                });\r\n                json_async(\"/admin/record/sort.json\", last_page_record + $sort.sortable('serialize'), function (data) {\r\n                    backend.message.snackbar(\"排序完成...\");\r\n                }, function (data) {\r\n                    return false;\r\n                });\r\n            }\r\n        });\r\n    //}catch(e){\r\n    //}\r\n    //$(\"table\").stickyTableHeaders({scrollableArea: $('.scrollDiv')});\r\n}\r\nfunction makeListOp(){\r\n    if ($(\".filed-display-operations ul\").data(\"done\") == true){ return false;}\r\n    $(\"input[data-field]\").each(function () {\r\n        var field_name = $(this).data(\"field\");\r\n        var field_texe = $(this).text();\r\n        var field_val  = $(this).val();\r\n        var is_checked = \"checked\" ? $(this).attr(\"checked\"): \"\";\r\n        if (field_name != 'is_enable' && field_name != 'record_buttons' && field_name != '') {\r\n            $(\".filed-display-operations ul\").append(\r\n                '<li><input type=\"checkbox\" ' + is_checked + ' ' +\r\n                'id=\"ro-field-' + field_name + '\" ' +\r\n                'value=\"' + field_val + '\">' +\r\n                '<label for=\"ro-field-' + field_name + '\">' + $(this).parent().text() + '</label></li>'\r\n            );\r\n        }\r\n    });\r\n    $('.filed-display-operations ul input[type=checkbox]').change(function() {\r\n        var id = $(this).attr(\"id\").replace(\"ro-field-\", \"\");\r\n        var val = $(this).is(\":checked\");\r\n        $(\"input[data-field='\" + id + \"']\").click();\r\n    });\r\n    $(\".filed-display-operations ul\").attr(\"data-done\", true);\r\n}\r\n\r\n"]}